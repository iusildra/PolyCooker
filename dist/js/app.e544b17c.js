(function(){"use strict";var e={785:function(e,t,s){var i=s(3396),n=JSON.parse('{"W":{"C0":"https://polycookerapi.cluster-ig3.igpolytech.fr/api/seasons/","V5":"https://polycookerapi.cluster-ig3.igpolytech.fr/api/types/","Tc":"https://polycookerapi.cluster-ig3.igpolytech.fr/api/diets/","Dl":"https://polycookerapi.cluster-ig3.igpolytech.fr/api/units/","Wo":"https://polycookerapi.cluster-ig3.igpolytech.fr/api/users/id/","F_":"https://polycookerapi.cluster-ig3.igpolytech.fr/api/recipes/","vB":"https://polycookerapi.cluster-ig3.igpolytech.fr/api/recipes/id/","AQ":"https://polycookerapi.cluster-ig3.igpolytech.fr/api/recipes/ingredients/","MP":"https://polycookerapi.cluster-ig3.igpolytech.fr/api/ingredients/","zo":"https://polycookerapi.cluster-ig3.igpolytech.fr/api/ingredients/name/","xJ":"https://polycookerapi.cluster-ig3.igpolytech.fr/api/signin/","IU":"https://polycookerapi.cluster-ig3.igpolytech.fr/api/signup/"}}'),a=s(6265),o=s.n(a);const r={class:"page-footer"},l=(0,i.uE)('<div class="container" data-v-7003c254><div class="row" data-v-7003c254><div class="col l6 s12" data-v-7003c254><h5 class="white-text" data-v-7003c254>About PolyCooker</h5><p class="grey-text text-lighten-4" data-v-7003c254> I&#39;ve made this cooking site during a 2 weeks web project at Polytech Montpellier using Vue.js, Node.js and Express.js. You can create recipes and add them to a calendar in order to plan your shopping. </p></div><div class="col l4 offset-l2 s12" data-v-7003c254><h5 class="white-text" data-v-7003c254>Links</h5><ul data-v-7003c254><li data-v-7003c254><a class="grey-text text-lighten-3" href="https://github.com/iusildra" target="_blank" data-v-7003c254>My Github</a></li><li data-v-7003c254><a class="grey-text text-lighten-3" href="https://www.linkedin.com/in/lucas-nouguier-833725196/" target="_blank" data-v-7003c254>Mon Linkedin (Français)</a></li><li data-v-7003c254><a class="grey-text text-lighten-3" href="https://www.linkedin.com/in/lucas-nouguier-833725196/?locale=en_US" target="_blank" data-v-7003c254>My Linkedin (English)</a></li></ul></div></div></div><div class="footer-copyright" data-v-7003c254><div class="container" data-v-7003c254> © Way too perfectible to claim copyrights :) © </div></div>',2),c=[l];function d(e,t){return(0,i.wg)(),(0,i.iD)("footer",r,c)}var p=s(89);const u={},h=(0,p.Z)(u,[["render",d],["__scopeId","data-v-7003c254"]]);var g=h;const m=e=>((0,i.dD)("data-v-0b53c60a"),e=e(),(0,i.Cn)(),e),v={class:"navbar-fixed"},f={class:"nav-wrapper"},_=(0,i.Uk)("Polycooker"),y=m((()=>(0,i._)("ul",{class:"right"},[(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-trigger",href:"#!","data-target":"dropdown1"},[(0,i.Uk)("Account"),(0,i._)("i",{class:"material-icons right"},"arrow_drop_down")])])],-1))),w={id:"dropdown1",class:"dropdown-content"},b=(0,i.Uk)("My account"),k=(0,i.Uk)("Calendar"),D={key:0,class:"divider"},C={key:1},I=(0,i.Uk)("Sign in"),R={key:2},S=(0,i.Uk)("Sign up"),q={key:3},A=(0,i.Uk)("Create user"),W={key:4},U=(0,i.Uk)("Edit my info"),x={key:5,class:"divider"},$={key:6},z=(0,i.Uk)("Deconnexion"),E={key:7},j=(0,i.Uk)("Delete account");function O(e,t,s,n,a,o){const r=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("header",null,[(0,i._)("div",v,[(0,i._)("nav",null,[(0,i._)("div",f,[(0,i.Wm)(r,{to:"/",class:"left brand-logo"},{default:(0,i.w5)((()=>[_])),_:1}),y])]),(0,i._)("ul",w,[(0,i._)("li",null,[(0,i.Wm)(r,{to:"/account"},{default:(0,i.w5)((()=>[b])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(r,{to:"/calendar"},{default:(0,i.w5)((()=>[k])),_:1})]),!a.getters.isLoggedIn||a.getters.getUser.admin?((0,i.wg)(),(0,i.iD)("li",D)):(0,i.kq)("",!0),a.getters.isLoggedIn?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("li",C,[(0,i.Wm)(r,{to:"/signin"},{default:(0,i.w5)((()=>[I])),_:1})])),a.getters.isLoggedIn?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("li",R,[(0,i.Wm)(r,{to:"/signup"},{default:(0,i.w5)((()=>[S])),_:1})])),a.getters.isLoggedIn&&a.getters.getUser.admin?((0,i.wg)(),(0,i.iD)("li",q,[(0,i.Wm)(r,{to:"/createuser"},{default:(0,i.w5)((()=>[A])),_:1})])):(0,i.kq)("",!0),a.getters.isLoggedIn?((0,i.wg)(),(0,i.iD)("li",W,[(0,i.Wm)(r,{to:"/editinfo"},{default:(0,i.w5)((()=>[U])),_:1})])):(0,i.kq)("",!0),a.getters.isLoggedIn?((0,i.wg)(),(0,i.iD)("li",x)):(0,i.kq)("",!0),a.getters.isLoggedIn?((0,i.wg)(),(0,i.iD)("li",$,[(0,i.Wm)(r,{to:"/",onClick:o.logout},{default:(0,i.w5)((()=>[z])),_:1},8,["onClick"])])):(0,i.kq)("",!0),a.getters.isLoggedIn?((0,i.wg)(),(0,i.iD)("li",E,[(0,i.Wm)(r,{to:"/",class:"materialize-red-text",onClick:o.deleteAccount},{default:(0,i.w5)((()=>[j])),_:1},8,["onClick"])])):(0,i.kq)("",!0)])])])}var L=s(5797),P=s.n(L);P().AutoInit();var T={data(){return{getters:this.$store.getters}},methods:{signIn:()=>{let e={};document.querySelectorAll("#signup input").forEach((t=>{e[t.id]=t.value}));const t={body:JSON.stringify(e),headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST"};fetch(n.W.xJ,t).then((e=>e.json())).then((e=>P().toast({html:e.msg,classes:"rounded"})))},logout(){this.$store.dispatch("logout"),this.$router.push("/"),P().toast({html:"Goodbye !",classes:"rounded"})},deleteAccount:async function(){let e=prompt("Please enter your full username (case sensitive) to confirm your account deletion");if(e!=this.$store.getters.getUser.username)return;const t=this.$store.getters.getUser.user_id;try{const e=await o()["delete"](n.W.Wo+t);this.logout(),this.$emit("userDeleted",t),P().toast({html:e.data.msg,classes:"rounded"})}catch(s){P().toast({html:s.response.data.msg,classes:"rounded"})}}}};const M=(0,p.Z)(T,[["render",O],["__scopeId","data-v-0b53c60a"]]);var Y=M;const B={id:"addRecipe"},N=(0,i._)("i",{class:"material-icons"},"add",-1),V={data(){return{recipes:[],calendarRecipes:[],chosenRecipe:"",getters:this.$store.getters}},methods:{searchRecipes:function(e,t,s=0,i=25){o().get(n.W.F_,{params:{search:e,id:t,limit:i,offset:s},headers:{"Content-Type":"application/json"}}).then((e=>this.recipes=e.data)).catch((e=>console.log(e)))},updateList(e){this.recipes=this.recipes.filter((t=>t.recipe_author!=e))},recipeChosen(e){this.chosenRecipe=e},removeRecipe(e){this.recipes.splice(this.recipes.indexOf(e),1)},addCalendar(e,t){this.calendarRecipes.push({id:e,name:t})}}};var H=Object.assign(V,{setup(e){return(e,t)=>{const s=(0,i.up)("router-view"),n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(Y,{onUserDeleted:e.updateList},null,8,["onUserDeleted"]),(0,i.Wm)(s,{recipes:this.recipes,recipe_id:this.chosenRecipe,calendarRecipes:this.calendarRecipes,onSearchRecipes:e.searchRecipes,onRecipeChosen:e.recipeChosen,onRemoveRecipe:e.removeRecipe,onAddCalendar:e.addCalendar},null,8,["recipes","recipe_id","calendarRecipes","onSearchRecipes","onRecipeChosen","onRemoveRecipe","onAddCalendar"]),(0,i.Wm)(g),(0,i._)("div",B,[e.getters.isLoggedIn?((0,i.wg)(),(0,i.j4)(n,{key:0,to:"/createrecipe",class:"btn-floating btn-large waves-effect waves-light modal-trigger red",href:"#createRecipe"},{default:(0,i.w5)((()=>[N])),_:1})):(0,i.kq)("",!0)])],64)}}});const K=H;var Z=K,F=s(9242),J=s(678),Q=s(7139);const G=e=>((0,i.dD)("data-v-4b7992ed"),e=e(),(0,i.Cn)(),e),X={class:"container"},ee=G((()=>(0,i._)("h3",null,"Add a new recipe",-1))),te={class:"row"},se={class:"col s12 m4"},ie=G((()=>(0,i._)("label",{for:"recipe_name"},"Recipe name",-1))),ne={class:"col s12 m4"},ae=G((()=>(0,i._)("label",{for:"nbPersons"},"Number of persons",-1))),oe={class:"col s12 m4"},re=G((()=>(0,i._)("label",{for:"duration"},"Duration (min)",-1))),le=G((()=>(0,i._)("div",{class:"divider"},null,-1))),ce={class:"row"},de={class:"input-field col s12 m4"},pe=G((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),ue=["value"],he=G((()=>(0,i._)("label",{for:"season_select"},"Season",-1))),ge={class:"input-field col s12 m4"},me=G((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),ve=["value"],fe=G((()=>(0,i._)("label",{for:"type_select"},"Type",-1))),_e={class:"input-field col s12 m4"},ye=G((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),we=["value"],be=G((()=>(0,i._)("label",{for:"diet_select"},"Diet",-1))),ke=G((()=>(0,i._)("div",{class:"divider"},null,-1))),De=G((()=>(0,i._)("h5",null,"Ingredients",-1))),Ce={id:"ingredients",class:"row"},Ie={class:"col s8"},Re={class:"col s2"},Se=["onClick"],qe=G((()=>(0,i._)("i",{class:"material-icons"},"delete",-1))),Ae=[qe],We={id:"addIngredient",class:"row input-field z-depth-1"},Ue={class:"col s12 m6 l4"},xe=G((()=>(0,i._)("label",{for:"ingr_name"},"Name",-1))),$e=G((()=>(0,i._)("div",{class:"col s12 m3 l4"},[(0,i._)("label",{for:"ingr_quantity"},"Quantity"),(0,i._)("input",{type:"number",id:"ingr_quantity"})],-1))),ze={class:"col s12 m3 l4"},Ee=G((()=>(0,i._)("label",{for:"ingr_unit"},"Unit",-1))),je={id:"ingr_unit"},Oe=G((()=>(0,i._)("option",{value:"",selected:"",disabled:""},"Unit",-1))),Le=["value"],Pe={class:"col s12",id:"ingr_actions"},Te=G((()=>(0,i._)("div",{class:"col s8"},[(0,i._)("button",{type:"button","data-target":"modal_addIngr",class:"btn waves-effect waves-light materialize-red lighten-2 modal-trigger"}," Missing ingredient ? ")],-1))),Me={class:"col s4"},Ye=G((()=>(0,i._)("i",{class:"material-icons"},"add",-1))),Be=[Ye],Ne={id:"modal_addIngr",class:"modal"},Ve={class:"modal-content"},He=G((()=>(0,i._)("h4",null,"New ingredient",-1))),Ke=G((()=>(0,i._)("div",{class:"input-field"},[(0,i._)("input",{type:"text",id:"ingredient_name"}),(0,i._)("label",{for:"ingredient_name"},"Name")],-1))),Ze={class:"row"},Fe={class:"input-field col s6"},Je={id:"ingredient_season"},Qe=G((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),Ge=["value"],Xe=G((()=>(0,i._)("div",{class:"input-field col s6"},[(0,i._)("label",null,[(0,i._)("input",{type:"checkbox",id:"is_allergen"}),(0,i._)("span",null,"Allergen ?")])],-1))),et={class:"modal-footer"},tt=G((()=>(0,i._)("div",{class:"divider"},null,-1))),st=G((()=>(0,i._)("div",{class:"input-field col s12 m10"},[(0,i._)("h5",null,"Steps (separate with double LF)"),(0,i._)("textarea",{id:"recipe_steps"})],-1))),it=G((()=>(0,i._)("div",{class:"divider"},null,-1))),nt={class:"row"},at={class:"input-field col s6"},ot=G((()=>(0,i._)("h6",null,"Difficulty",-1))),rt={name:"value"},lt={class:"input-field col s6"},ct=G((()=>(0,i._)("h6",null,"Cost",-1))),dt={name:"value"},pt=G((()=>(0,i._)("div",{class:"submit"},[(0,i._)("button",{class:"btn waves-effect waves-light",type:"submit"},[(0,i.Uk)(" Submit "),(0,i._)("i",{class:"material-icons right"},"send")])],-1)));function ut(e,t,s,n,a,o){return(0,i.wg)(),(0,i.iD)("div",X,[(0,i._)("form",{id:"createRecipe",onSubmit:t[11]||(t[11]=(0,F.iM)(((...e)=>o.onSubmit&&o.onSubmit(...e)),["prevent"]))},[ee,(0,i._)("div",te,[(0,i._)("div",se,[ie,(0,i.wy)((0,i._)("input",{type:"text",id:"recipe_name","onUpdate:modelValue":t[0]||(t[0]=e=>this.name=e),required:""},null,512),[[F.nr,this.name]])]),(0,i._)("div",ne,[ae,(0,i.wy)((0,i._)("input",{type:"number",id:"nbPersons","onUpdate:modelValue":t[1]||(t[1]=e=>this.for=e),min:"0",required:""},null,512),[[F.nr,this.for]])]),(0,i._)("div",oe,[re,(0,i.wy)((0,i._)("input",{type:"number",id:"duration","onUpdate:modelValue":t[2]||(t[2]=e=>this.duration=e),min:"0",required:""},null,512),[[F.nr,this.duration]])])]),le,(0,i._)("div",ce,[(0,i._)("div",de,[(0,i.wy)((0,i._)("select",{id:"season_select","onUpdate:modelValue":t[3]||(t[3]=e=>this.season=e)},[pe,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.seasons,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e["season_name"],key:e["season_name"]},(0,Q.zw)(e["season_name"]),9,ue)))),128))],512),[[F.bM,this.season]]),he]),(0,i._)("div",ge,[(0,i.wy)((0,i._)("select",{id:"type_select","onUpdate:modelValue":t[4]||(t[4]=e=>this.type=e)},[me,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.types,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e["type_name"],key:e["type_name"]},(0,Q.zw)(e["type_name"]),9,ve)))),128))],512),[[F.bM,this.type]]),fe]),(0,i._)("div",_e,[(0,i.wy)((0,i._)("select",{id:"diet_select","onUpdate:modelValue":t[5]||(t[5]=e=>this.diet=e)},[ye,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.diets,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e["diet_name"],key:e["diet_name"]},(0,Q.zw)(e["diet_name"]),9,we)))),128))],512),[[F.bM,this.diet]]),be])]),ke,De,(0,i._)("div",Ce,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.ingredients,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"ingredient col s12 m5 xl3 z-depth-1 valign-wrapper",key:t},[(0,i._)("div",Ie,(0,Q.zw)(e.name+" : "+e.quantity+e.unit),1),(0,i._)("div",Re,[(0,i._)("button",{type:"button",id:"addIngredient",class:"btn-small red",onClick:t=>o.deleteIngredient(e)},Ae,8,Se)])])))),128))]),(0,i._)("div",We,[(0,i._)("div",Ue,[xe,(0,i._)("input",{type:"text",id:"ingr_name",class:"autocomplete",autocomplete:"off",onInput:t[6]||(t[6]=e=>o.getAutoComplete())},null,32)]),$e,(0,i._)("div",ze,[Ee,(0,i._)("select",je,[Oe,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.units,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{key:t,value:e.unit_name},(0,Q.zw)(e.unit_name),9,Le)))),128))])]),(0,i._)("div",Pe,[Te,(0,i._)("div",Me,[(0,i._)("button",{type:"button",class:"btn waves-effect waves-light blue",onClick:t[7]||(t[7]=(...e)=>o.addIngredient&&o.addIngredient(...e))},Be)])])]),(0,i._)("div",Ne,[(0,i._)("div",Ve,[He,Ke,(0,i._)("div",Ze,[(0,i._)("div",Fe,[(0,i._)("select",Je,[Qe,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.seasons,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e.season_name,key:e.season_name},(0,Q.zw)(e.season_name),9,Ge)))),128))])]),Xe])]),(0,i._)("div",et,[(0,i._)("button",{type:"button",class:"modal-close waves-effect waves-green btn-flat",onClick:t[8]||(t[8]=(...e)=>o.newIngredient&&o.newIngredient(...e))}," Validate ")])]),tt,st,it,(0,i._)("div",nt,[(0,i._)("div",at,[ot,(0,i.wy)((0,i._)("input",{type:"range",id:"difficulty",min:"0",max:"5",step:"0.5","onUpdate:modelValue":t[9]||(t[9]=e=>this.difficulty=e)},null,512),[[F.nr,this.difficulty]]),(0,i._)("p",rt,(0,Q.zw)(this.difficulty)+" / 5",1)]),(0,i._)("div",lt,[ct,(0,i.wy)((0,i._)("input",{type:"range",id:"cost",min:"0",max:"5",step:"0.5","onUpdate:modelValue":t[10]||(t[10]=e=>this.cost=e)},null,512),[[F.nr,this.cost]]),(0,i._)("p",dt,(0,Q.zw)(this.cost)+" / 5",1)])]),pt],32)])}var ht={created(){this.fetchOptions((()=>{P().AutoInit(),P().Autocomplete.init(document.querySelectorAll("#ingr_name"),{data:{},limit:1/0,minLength:1})}))},data(){return{seasons:[],types:[],diets:[],units:[],name:"",for:0,duration:0,season:"",type:"",diet:"",ingredients:[],difficulty:0,cost:0,count:0}},methods:{async fetchOptions(e){await fetch(n.W.C0).then((e=>e.json())).then((e=>this.seasons=e)),await fetch(n.W.V5).then((e=>e.json())).then((e=>this.types=e)),await fetch(n.W.Tc).then((e=>e.json())).then((e=>this.diets=e)),await fetch(n.W.Dl).then((e=>e.json())).then((e=>this.units=e)),e()},onSubmit(){if(0==this.ingredients.length)return void P().toast({html:"You must give at least one ingredient !",classes:"rounded"});if(0==document.getElementById("recipe_steps").value.length)return void P().toast({html:"You must give at least one step !",classes:"rounded"});const e={author:this.$store.getters.getUser.user_id,name:this.name,for:this.for,duration:this.duration,season:this.season,type:this.type,diet:this.diet,ingredients:this.ingredients,steps:document.getElementById("recipe_steps").value,difficulty:this.difficulty,cost:this.cost};o().post(n.W.F_,e).then((e=>P().toast({html:e.data.msg}))).catch((e=>{P().toast({html:e.response.data.msg})}))},getAutoComplete(){let e=document.getElementById("ingr_name");const t=e.value;t.length>=3&&fetch(n.W.zo+t).then((e=>e.json())).then((t=>{let s=t.map((e=>`"${e["ingredient_name"]}":""`)).join();s="{"+s+"}";let i=P().Autocomplete.getInstance(e);i.updateData(JSON.parse(s))}))},addIngredient(){const e=document.getElementById("ingr_name").value,t=document.getElementById("ingr_quantity").value,s=document.getElementById("ingr_unit").value;console.log(e,t,s),0==e.length||0==t||0==s.length?P().toast({html:"Please provide correct inputs !",classes:"rounded"}):this.ingredients.push({name:e,quantity:t,unit:s}),console.log(this.ingredients)},deleteIngredient(e){this.ingredients.splice(this.ingredients.indexOf(e),1)},async newIngredient(){const e=document.getElementById("ingredient_season").value,t={ingredient_name:document.getElementById("ingredient_name").value,ingredient_season:e.length>0?e:null,is_allergen:document.getElementById("is_allergen").checked};try{const e=await o().post(n.W.MP,t);P().toast({html:e.data.msg,classes:"rounded"}),document.getElementById("ingr_name").value=t.ingredient_name}catch(s){P().toast({html:"Creation failed. Maybe the ingredient already exists ?",classes:"rounded"})}}}};const gt=(0,p.Z)(ht,[["render",ut],["__scopeId","data-v-4b7992ed"]]);var mt=gt;const vt=e=>((0,i.dD)("data-v-06b2cbf8"),e=e(),(0,i.Cn)(),e),ft={class:"col s12 m3 xl2"},_t=vt((()=>(0,i._)("h5",null,"Ingredients",-1))),yt={class:"card"};var wt={props:{ingredients:{type:Array,required:!0}},setup(e){return(t,s)=>((0,i.wg)(),(0,i.iD)("div",ft,[_t,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.ingredients,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"s4 m6 l12",key:e.ingredient_id},[(0,i._)("div",yt,[(0,i._)("span",null,[(0,i._)("strong",null,(0,Q.zw)(e.quantity)+(0,Q.zw)(e.unit_name+" "),1)]),(0,i._)("span",null,(0,Q.zw)(e.ingredient_name),1)])])))),128))]))}};const bt=(0,p.Z)(wt,[["__scopeId","data-v-06b2cbf8"]]);var kt=bt;const Dt={class:"col s12 m9 xl10"},Ct=(0,i._)("div",{class:"divider"},null,-1);var It={props:{steps:{type:Array,required:!0}},setup(e){return(e,t)=>((0,i.wg)(),(0,i.iD)("div",Dt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.steps,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"step",key:t},[Ct,(0,i._)("h5",null,"Step n°"+(0,Q.zw)(t+1),1),(0,i.Uk)(" "+(0,Q.zw)(e),1)])))),128))]))}};const Rt=It;var St=Rt;const qt={class:"container"},At=["src","alt"],Wt={class:"chip"},Ut={class:"flex"},xt={class:"flex"},$t={key:0},zt={key:1},Et={key:2},jt={methods:{diplayDuration:e=>e>60?e/60+"h"+(e-e/60*60)+"m":e+"m"}};var Ot=Object.assign(jt,{props:{info:{type:Object,required:!0}},setup(e){return(t,s)=>((0,i.wg)(),(0,i.iD)("div",qt,[(0,i._)("div",null,[(0,i._)("img",{src:e.info.src,alt:e.info.name+"'s picture"},null,8,At)]),(0,i._)("div",Wt,(0,Q.zw)(e.info.author),1),(0,i._)("h4",null,(0,Q.zw)(e.info.name+" ("+e.info.for+"p.)"),1),(0,i._)("div",Ut,[(0,i._)("span",null,"Duration: "+(0,Q.zw)(this.diplayDuration(e.info.duration)),1),(0,i._)("span",null,"Difficulty : "+(0,Q.zw)(e.info.difficulty)+" / 5",1),(0,i._)("span",null,"Cost: "+(0,Q.zw)(e.info.cost)+" / 5",1)]),(0,i._)("div",xt,[null!=e.info.season?((0,i.wg)(),(0,i.iD)("span",$t,(0,Q.zw)(e.info.season),1)):(0,i.kq)("",!0),null!=e.info.type?((0,i.wg)(),(0,i.iD)("span",zt,(0,Q.zw)(e.info.type),1)):(0,i.kq)("",!0),null!=e.info.diet?((0,i.wg)(),(0,i.iD)("span",Et,(0,Q.zw)(e.info.diet),1)):(0,i.kq)("",!0)])]))}});const Lt=(0,p.Z)(Ot,[["__scopeId","data-v-4a216cbd"]]);var Pt=Lt;const Tt={class:"container"},Mt={class:"row"},Yt={class:"row"},Bt={created(){0==this.recipe_id.length?this.fetchRecipe(this.$route.params["uuid"]):this.fetchRecipe(this.recipe_id),this.$watch((()=>this.$route.params),(e=>{this.fetchRecipe(e["uuid"])}))},data(){return{ingredients:[],info:{},steps:[]}},methods:{fetchRecipe(e){o().get(n.W.vB+e).then((e=>{const t=e.data;this.info={diet:t.diet_name,season:t.season_name,type:t.type_name,cost:t.recipe_cost,difficulty:t.recipe_difficulty,duration:t.recipe_duration,for:t.recipe_for,name:t.recipe_name,author:t.username},this.ingredients=t.ingredients,this.steps=t.recipe_steps.split("\n\n")}))}}};var Nt=Object.assign(Bt,{props:{recipe_id:{type:String,required:!1,default:""}},setup(e){return(e,t)=>((0,i.wg)(),(0,i.iD)("div",Tt,[(0,i._)("div",Mt,[(0,i.Wm)(Pt,{info:this.info},null,8,["info"])]),(0,i._)("div",Yt,[(0,i.Wm)(kt,{class:"ingredients",ingredients:this.ingredients},null,8,["ingredients"]),(0,i.Wm)(St,{steps:this.steps},null,8,["steps"])])]))}});const Vt=(0,p.Z)(Nt,[["__scopeId","data-v-780f7470"]]);var Ht=Vt;const Kt=e=>((0,i.dD)("data-v-1c285930"),e=e(),(0,i.Cn)(),e),Zt={class:"container"},Ft=Kt((()=>(0,i._)("h3",null,"Edit infos",-1))),Jt={class:"input-field"},Qt=["value"],Gt=Kt((()=>(0,i._)("label",{for:"signup"},"Email",-1))),Xt={class:"input-field"},es=["value"],ts=Kt((()=>(0,i._)("label",{for:"signup"},"Username",-1))),ss=(0,i.uE)('<div class="input-field" data-v-1c285930><label for="signup" data-v-1c285930>New password</label><input type="password" id="passwd" data-v-1c285930></div><div class="input-field" data-v-1c285930><label for="signup" data-v-1c285930>Confirm password</label><input type="password" id="passwd_repeat" data-v-1c285930></div><div class="input-field" data-v-1c285930><button class="btn waves-effect waves-light" type="submit" data-v-1c285930> Submit <i class="material-icons right" data-v-1c285930>send</i></button></div>',3);function is(e,t,s,n,a,o){return(0,i.wg)(),(0,i.iD)("div",Zt,[(0,i._)("form",{id:"signup",onSubmit:t[0]||(t[0]=(0,F.iM)(((...e)=>o.updateData&&o.updateData(...e)),["prevent"]))},[Ft,(0,i._)("div",Jt,[(0,i._)("input",{type:"text",id:"email",value:a.getters.getUser.email,required:""},null,8,Qt),Gt]),(0,i._)("div",Xt,[(0,i._)("input",{type:"text",id:"username",value:a.getters.getUser.username,required:""},null,8,es),ts]),ss],32)])}var ns={async signin(e){return o().post(n.W.xJ,e).then((e=>e.data))},async signup(e){return o().post(n.W.IU,e).then((e=>e.data))},async updateData(e){return o().put(n.W.Wo+e["id"],e).then((e=>e.data))}};P().AutoInit();var as={data(){return{getters:this.$store.getters}},methods:{updateData:async function(){try{const e={};document.querySelectorAll("#signup input").forEach((t=>{e[t.id]=t.value})),e["id"]=this.$store.getters.getUser.user_id;const t=await ns.updateData(e);P().toast({html:t.msg,classes:"rounded"})}catch(e){P().toast({html:e.response.data.msg,classes:"rounded"})}}}};const os=(0,p.Z)(as,[["render",is],["__scopeId","data-v-1c285930"]]);var rs=os,ls=s(2269),cs=s.n(ls);const ds=e=>((0,i.dD)("data-v-887986ee"),e=e(),(0,i.Cn)(),e),ps=ds((()=>(0,i._)("div",{class:"divider"},null,-1))),us={class:"row weekNb"},hs={class:"row col week"},gs=ds((()=>(0,i._)("h6",null,"Noon",-1))),ms={class:"row meal valign-wrapper"},vs=ds((()=>(0,i._)("span",{class:"id",hidden:""},null,-1))),fs=ds((()=>(0,i._)("span",{class:"name"},null,-1))),_s=[vs,fs],ys=ds((()=>(0,i._)("div",{class:"input-field col s12 m6"},[(0,i._)("label",{for:".nb_persons"},"For how many ?"),(0,i._)("input",{type:"number",class:"nb_persons",min:"0"})],-1))),ws=ds((()=>(0,i._)("h6",null,"Evening",-1))),bs={class:"row meal valign-wrapper"},ks=ds((()=>(0,i._)("span",{class:"id",hidden:""},null,-1))),Ds=ds((()=>(0,i._)("span",{class:"name"},null,-1))),Cs=[ks,Ds],Is=ds((()=>(0,i._)("div",{class:"input-field col s12 m6"},[(0,i._)("label",{for:".nb_persons"},"For how many ?"),(0,i._)("input",{type:"number",class:"nb_persons",min:"0"})],-1))),Rs={data(){return{days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]}},methods:{onDrop(e){const t=e.dataTransfer.getData("itemID"),s=e.dataTransfer.getData("itemName");e.target.querySelector(".id").innerText=t,e.target.querySelector(".name").innerText=s}}};var Ss=Object.assign(Rs,{props:{nbWeeks:{type:Number,required:!0}},setup(e){return(e,t)=>((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(parseInt(this.nbWeeks,10),(s=>((0,i.wg)(),(0,i.iD)("div",{key:s},[ps,(0,i._)("div",us,[(0,i._)("h4",null,"Week n°"+(0,Q.zw)(s),1)]),(0,i._)("div",hs,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.days,(s=>((0,i.wg)(),(0,i.iD)("div",{class:"meals col z-depth-1 s12 m6 xl4",key:s},[(0,i._)("h5",null,(0,Q.zw)(s),1),gs,(0,i._)("div",ms,[(0,i._)("div",{class:"dropzone col s12 m5",onDrop:t[0]||(t[0]=t=>e.onDrop(t)),onDragover:t[1]||(t[1]=(0,F.iM)((()=>{}),["prevent"])),onDragenter:t[2]||(t[2]=(0,F.iM)((()=>{}),["prevent"]))},_s,32),ys]),ws,(0,i._)("div",bs,[(0,i._)("div",{class:"dropzone col s12 m5",onDrop:t[3]||(t[3]=t=>e.onDrop(t)),onDragover:t[4]||(t[4]=(0,F.iM)((()=>{}),["prevent"])),onDragenter:t[5]||(t[5]=(0,F.iM)((()=>{}),["prevent"]))},Cs,32),Is])])))),128))])])))),128))}});const qs=(0,p.Z)(Ss,[["__scopeId","data-v-887986ee"]]);var As=qs;const Ws=e=>((0,i.dD)("data-v-68dc6145"),e=e(),(0,i.Cn)(),e),Us={id:"calendar",class:"container"},xs={class:"row input-field"},$s=Ws((()=>(0,i._)("option",{value:"1"},"1",-1))),zs=Ws((()=>(0,i._)("option",{value:"2"},"2",-1))),Es=Ws((()=>(0,i._)("option",{value:"3"},"3",-1))),js=Ws((()=>(0,i._)("option",{value:"4"},"4",-1))),Os=[$s,zs,Es,js],Ls=Ws((()=>(0,i._)("label",{for:"nbWeek"},"Number of weeks",-1))),Ps={class:"col s12 m8"},Ts=Ws((()=>(0,i._)("div",{class:"col s12 m4"},null,-1))),Ms={class:"row list"},Ys=["onDragstart"],Bs=Ws((()=>(0,i._)("i",{class:"close material-icons"},"close",-1))),Ns={class:"row"},Vs={id:"modal1",class:"modal"},Hs={ref:"printcontent",class:"modal-content"},Ks=Ws((()=>(0,i._)("h4",null,"Shopping list",-1))),Zs=Ws((()=>(0,i._)("input",{type:"checkbox"},null,-1))),Fs={class:"modal-footer"},Js=Ws((()=>(0,i._)("button",{class:"modal-close waves-effect waves-green btn-flat"}," Close ",-1))),Qs={created(){this.$store.getters.isLoggedIn?(this.username=this.$store.getters.getUser.username,this.id=this.$store.getters.getUser.user_id):(this.$router.push("/signin"),P().toast({html:"You need to be logged in to access this page !",classes:"rounded"}))},mounted(){P().AutoInit()},data(){return{nbWeeks:1,shoppingList:{}}},methods:{startDrag(e,t){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("itemID",t.id),e.dataTransfer.setData("itemName",t.name)},printShoppingList(){this.shoppingList={};let e={};const t=document.querySelectorAll(".meal");t.forEach((t=>{const s=t.querySelector(".id").innerText,i=t.querySelector(".nb_persons").value;s.length>0&&(null!=e[s]?e[s]+=parseInt(i,10):e[s]=parseInt(i,10))})),o().get(n.W.AQ,{params:{meals:Object.keys(e)}}).then((t=>t.data.forEach((t=>{const s=t.the_ingredient,i=t.in_recipe;let n=t["Q per person"]*e[i],a=t.contained_unit;"d.s"==a&&(n*=10,a="cl"),"t.s"==a&&(n*=6,a="cl"),null==this.shoppingList[s]?this.shoppingList[s]={name:s,q:Math.round(parseInt(n)),unit:a}:this.shoppingList[s].q+=Math.round(n)})))).catch((e=>P().toast({html:e.response.data.msg})))},async print(){console.log("printing..");const e=this.$refs.printcontent,t={type:"dataURL"},s=await cs()(e,t),i=document.createElement("a");i.setAttribute("download","shoppingList.png"),i.setAttribute("href",s.toDataURL("image/png").replace("image/png","image/octet-stream")),i.click(),console.log("done")}}};var Gs=Object.assign(Qs,{props:{calendarRecipes:{type:Array,required:!1,default:()=>[]}},setup(e){return(e,t)=>((0,i.wg)(),(0,i.iD)("div",Us,[(0,i._)("div",xs,[(0,i.wy)((0,i._)("select",{name:"",id:"nbWeek","onUpdate:modelValue":t[0]||(t[0]=e=>this.nbWeeks=e)},Os,512),[[F.bM,this.nbWeeks]]),Ls]),(0,i._)("div",Ps,[(0,i.Wm)(As,{nbWeeks:parseInt(this.nbWeeks,10)},null,8,["nbWeeks"])]),Ts,(0,i._)("div",Ms,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.calendarRecipes,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"chip",draggable:"true",onDragstart:s=>e.startDrag(s,{id:t.id,name:t.name}),key:t.id},[(0,i.Uk)((0,Q.zw)(t.name),1),Bs],40,Ys)))),128))]),(0,i._)("div",Ns,[(0,i._)("button",{"data-target":"modal1",type:"button",class:"btn-large modal-trigger",onClick:t[1]||(t[1]=t=>e.printShoppingList())}," Generate shopping list ")]),(0,i._)("div",Vs,[(0,i._)("div",Hs,[Ks,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(this.shoppingList).sort(),(e=>((0,i.wg)(),(0,i.iD)("p",{key:e},[(0,i._)("label",null,[Zs,(0,i._)("span",null,(0,Q.zw)(this.shoppingList[e].name+" : "+this.shoppingList[e].q+this.shoppingList[e].unit),1)])])))),128))],512),(0,i._)("div",Fs,[(0,i._)("button",{class:"btn-flat",onClick:t[2]||(t[2]=(...t)=>e.print&&e.print(...t))},"Print"),Js])])]))}});const Xs=(0,p.Z)(Gs,[["__scopeId","data-v-68dc6145"]]);var ei=Xs,ti=s(4870);const si=e=>((0,i.dD)("data-v-2b33bc10"),e=e(),(0,i.Cn)(),e),ii={class:"search col s12 m3 l3 xl2"},ni=si((()=>(0,i._)("h5",null,"Search",-1))),ai={key:0,class:"input-field"},oi=si((()=>(0,i._)("label",{for:"author_search",class:"caption"},"Author",-1))),ri={class:"input-field"},li=si((()=>(0,i._)("label",{for:"recipe_search"},"Recipe",-1))),ci={class:"input-field"},di={id:"ingredient_chips",class:"chips"},pi=si((()=>(0,i._)("label",{for:"ingredients_search"},"Ingredient",-1))),ui={class:"input-field"},hi=si((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),gi=["value"],mi=si((()=>(0,i._)("label",{for:"season_select"},"Season",-1))),vi={class:"input-field"},fi=si((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),_i=["value"],yi=si((()=>(0,i._)("label",{for:"type_select"},"Type",-1))),wi={class:"input-field"},bi=si((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),ki=["value"],Di=si((()=>(0,i._)("label",{for:"diet_select"},"Diet",-1))),Ci=si((()=>(0,i._)("div",{class:"submit"},[(0,i._)("button",{class:"btn waves-effect waves-light",type:"submit"},[(0,i.Uk)(" Submit "),(0,i._)("i",{class:"material-icons right"},"send")])],-1))),Ii={mounted(){this.fetchOptions((()=>{P().AutoInit()}))},data(){return{seasons:[],types:[],diets:[],authorSearch:"",recipeSearch:"",season:"",type:"",diet:""}},methods:{getAutoComplete(){let e=document.getElementById("ingredients_search");const t=e.value;t.length>=3&&fetch(n.W.zo+t).then((e=>e.json())).then((t=>{let s=t.map((e=>`"${e["ingredient_name"]}":""`)).join();s="{"+s+"}";let i=P().Autocomplete.getInstance(e);i.updateData(JSON.parse(s))}))},getIngredients(){let e=document.querySelectorAll(".chip"),t=[];return e.forEach((e=>{t.push(e.innerHTML.split("<")[0])})),t},onSubmit(){let e={},t=this.getIngredients();this.authorSearch.length>0&&(e["author"]=this.authorSearch),this.recipeSearch.length>0&&(e["recipe"]=this.recipeSearch),t.length>0&&(e["ingredients"]=t),this.season.length>0&&(e["seasonID"]=this.season),this.type.length>0&&(e["typeID"]=this.type),this.diet.length>0&&(e["dietID"]=this.diet),this.$emit("searchRecipes",e)},async fetchOptions(e){await fetch(n.W.C0).then((e=>e.json())).then((e=>this.seasons=e)),await fetch(n.W.V5).then((e=>e.json())).then((e=>this.types=e)),await fetch(n.W.Tc).then((e=>e.json())).then((e=>this.diets=e)),e()}}};var Ri=Object.assign(Ii,{props:{personalPage:{type:Boolean,required:!0}},setup(e){return(t,s)=>((0,i.wg)(),(0,i.iD)("div",ii,[(0,i._)("form",{id:"searchRecipe",onSubmit:s[6]||(s[6]=(0,F.iM)(((...e)=>t.onSubmit&&t.onSubmit(...e)),["prevent"]))},[ni,e.personalPage?((0,i.wg)(),(0,i.iD)("div",ai,[(0,i.wy)((0,i._)("input",{type:"text",id:"author_search","onUpdate:modelValue":s[0]||(s[0]=e=>this.authorSearch=e)},null,512),[[F.nr,this.authorSearch]]),oi])):(0,i.kq)("",!0),(0,i._)("div",ri,[(0,i.wy)((0,i._)("input",{type:"text",id:"recipe_search","onUpdate:modelValue":s[1]||(s[1]=e=>this.recipeSearch=e)},null,512),[[F.nr,this.recipeSearch]]),li]),(0,i._)("div",ci,[(0,i._)("div",di,[(0,i._)("input",{id:"ingredients_search",class:"autocomplete",placeholder:"Enter a tag",onInput:s[2]||(s[2]=(...e)=>t.getAutoComplete&&t.getAutoComplete(...e)),autocomplete:"off"},null,32)]),pi]),(0,i._)("div",ui,[(0,i.wy)((0,i._)("select",{id:"season_select","onUpdate:modelValue":s[3]||(s[3]=e=>this.season=e)},[hi,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.seasons,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e["season_name"],key:e["season_name"]},(0,Q.zw)(e["season_name"]),9,gi)))),128))],512),[[F.bM,this.season]]),mi]),(0,i._)("div",vi,[(0,i.wy)((0,i._)("select",{id:"type_select","onUpdate:modelValue":s[4]||(s[4]=e=>this.type=e)},[fi,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.types,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e["type_name"],key:e["type_name"]},(0,Q.zw)(e["type_name"]),9,_i)))),128))],512),[[F.bM,this.type]]),yi]),(0,i._)("div",wi,[(0,i.wy)((0,i._)("select",{id:"diet_select","onUpdate:modelValue":s[5]||(s[5]=e=>this.diet=e)},[bi,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.diets,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e["diet_name"],key:e["diet_name"]},(0,Q.zw)(e["diet_name"]),9,ki)))),128))],512),[[F.bM,this.diet]]),Di]),Ci],32)]))}});const Si=(0,p.Z)(Ri,[["__scopeId","data-v-2b33bc10"]]);var qi=Si,Ai=s(8422);const Wi={class:"card hoverable"},Ui={class:"card-image"},xi=["alt"],$i={class:"card-content"},zi={class:"card-title center"},Ei={class:"center"},ji={class:"center"},Oi={class:"center"},Li={class:"center"},Pi={class:"center"},Ti={class:"center"},Mi={key:0,class:"card-action"},Yi=["onClick"],Bi=["onClick"],Ni={data(){return{getters:this.$store.getters}},methods:{addCalendar(e,t){this.$emit("addCalendar",e,t),P().toast({html:"Recipe has been added to your calendar !",classes:"rounded"})},deleteRecipe(e){let t=prompt("Please enter the name of the recipe to confirm its deletion");t==e.recipe_name&&o()["delete"](n.W.vB+e.recipe_id).then((t=>{P().toast({html:t.data.msg,classes:"rounded"}),this.$emit("removeRecipe",e)})).catch((e=>{P().toast({html:e.response.data.msg,class:"rounded"}),403==e.response.status&&this.$router.push("/signin")}))}}};var Vi=Object.assign(Ni,{props:{recipes:{type:Array,required:!0},personalPage:{type:Boolean,required:!0}},setup(e){return(t,s)=>{const n=(0,i.up)("router-link");return(0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.recipes,(s=>((0,i.wg)(),(0,i.iD)("div",{class:"col s12 m6 l4 xl3",key:s["recipe_id"]},[(0,i._)("div",Wi,[(0,i.Wm)(n,{to:"/recipe/"+s.recipe_id,target:"_blank"},{default:(0,i.w5)((()=>[(0,i._)("div",Ui,[(0,i._)("img",{src:Ai,alt:s.name+"'s picture"},null,8,xi)]),(0,i._)("div",$i,[(0,i._)("span",zi,(0,Q.zw)(s["recipe_name"]),1),(0,i._)("p",Ei,(0,Q.zw)(s["username"]),1),(0,i._)("p",ji," Difficulty : "+(0,Q.zw)(s["recipe_difficulty"])+" / 5 ",1),(0,i._)("p",Oi," Cost : "+(0,Q.zw)(s["recipe_cost"])+" / 5 ",1),(0,i._)("p",Li,"Season : "+(0,Q.zw)(s["season_name"]),1),(0,i._)("p",Pi,"Type : "+(0,Q.zw)(s["type_name"]),1),(0,i._)("p",Ti,"Diet : "+(0,Q.zw)(s["diet_name"]),1)])])),_:2},1032,["to"]),this.getters.isLoggedIn?((0,i.wg)(),(0,i.iD)("div",Mi,[e.personalPage?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"waves-effect waves-light btn red",onClick:e=>t.deleteRecipe(s)}," Remove ",8,Yi)):(0,i.kq)("",!0),(0,i._)("button",{type:"button",class:"waves-effect waves-light btn add",onClick:e=>t.addCalendar(s.recipe_id,s.recipe_name)}," Add ",8,Bi)])):(0,i.kq)("",!0)])])))),128)}}});const Hi=(0,p.Z)(Vi,[["__scopeId","data-v-a3cbba8c"]]);var Ki=Hi;const Zi=e=>((0,i.dD)("data-v-66889cdb"),e=e(),(0,i.Cn)(),e),Fi={class:"col s12 m9 l9 xl10",id:"recipe_list"},Ji={class:"pagination"},Qi={class:"waves-effect"},Gi=["href"],Xi=Zi((()=>(0,i._)("i",{class:"material-icons"},"chevron_left",-1))),en=[Xi],tn={class:"waves-effect"},sn=["href"],nn=Zi((()=>(0,i._)("i",{class:"material-icons"},"chevron_right",-1))),an=[nn],on={methods:{recipeChosen(e){this.$emit("recipeChosen",e)},removeRecipe(e){this.$emit("removeRecipe",e)},addCalendar(e,t){this.$emit("addCalendar",e,t)}},computed:{path(){return this.$route.path},nextPage(){return this.offset+this.limit},previousPage(){const e=this.offset-this.limit;return e<0?0:e}}};var rn=Object.assign(on,{props:{recipes:{type:Array,required:!1,default:()=>[]},personalPage:{type:Boolean,required:!1,default:!1},offset:{type:Number,required:!0},limit:{type:Number,required:!0}},setup(e){return(t,s)=>((0,i.wg)(),(0,i.iD)("div",Fi,[(0,i._)("ul",Ji,[(0,i._)("li",Qi,[(0,i._)("a",{href:"#"+this.path+"?offset="+this.previousPage+"&limit=25"},en,8,Gi)]),(0,i._)("li",tn,[(0,i._)("a",{href:"#"+this.path+"?offset="+this.nextPage+"&limit=25"},an,8,sn)])]),(0,i.Wm)(Ki,{recipes:this.recipes,personalPage:e.personalPage,onRecipeChosen:this.recipeChosen,onRemoveRecipe:t.removeRecipe,onAddCalendar:t.addCalendar},null,8,["recipes","personalPage","onRecipeChosen","onRemoveRecipe","onAddCalendar"])]))}});const ln=(0,p.Z)(rn,[["__scopeId","data-v-66889cdb"]]);var cn=ln;const dn={class:"row"},pn=0,un=25,hn={mounted(){this.searchRecipes({}),this.$watch((()=>this.$route.query),(e=>{this.offset=e.offset?parseInt(e.offset,10):pn,this.limit=e.limit?parseInt(e.limit,10):un,this.$emit("searchRecipes",this.search,"",this.offset,this.limit)}))},data(){return{search:{},offset:pn,limit:un}},methods:{searchRecipes:function(e){this.search=e,this.$emit("searchRecipes",e,"",this.offset,this.limit)},recipeChosen(e){this.$emit("recipeChosen",e)},addCalendar(e,t){this.$emit("addCalendar",e,t)}}};var gn=Object.assign(hn,{props:{recipes:{type:Array,required:!0,default:()=>[]}},setup(e){return(e,t)=>((0,i.wg)(),(0,i.iD)("div",dn,[(0,i.Wm)((0,ti.SU)(qi),{onSearchRecipes:e.searchRecipes,personalPage:!0},null,8,["onSearchRecipes"]),(0,i.Wm)(cn,{offset:this.offset,limit:this.limit,recipes:this.recipes,onRecipeChosen:e.recipeChosen,onAddCalendar:e.addCalendar},null,8,["offset","limit","recipes","onRecipeChosen","onAddCalendar"])]))}});const mn=gn;var vn=mn;const fn={class:"row"},_n=0,yn=25;P().AutoInit();const wn={created(){this.$store.getters.isLoggedIn?(this.username=this.$store.getters.getUser.username,this.id=this.$store.getters.getUser.user_id,this.searchRecipes({},this.id)):(this.$router.push("/signin"),P().toast({html:"You need to be logged in to access this page !",classes:"rounded"})),this.$watch((()=>this.$route.query),(e=>{this.offset=e.offset?parseInt(e.offset,10):_n,this.limit=e.limit?parseInt(e.limit,10):yn,this.$emit("searchRecipes",this.search,this.id,this.offset,this.limit)}))},data(){return{offset:_n,limit:yn,username:"",search:{},id:""}},methods:{searchRecipes:function(e){this.search=e,this.$emit("searchRecipes",this.search,this.id,this.offset,this.limit)},recipeChosen(e){this.$emit("recipeChosen",e)},removeRecipe(e){this.$emit("removeRecipe",e)},addCalendar(e,t){this.$emit("addCalendar",e,t)}}};var bn=Object.assign(wn,{props:{recipes:{type:Array,required:!0,default:()=>[]}},setup(e){return(e,t)=>((0,i.wg)(),(0,i.iD)("main",null,[(0,i._)("div",fn,[(0,i.Wm)(qi,{onSearchRecipes:e.searchRecipes,personalPage:!1},null,8,["onSearchRecipes"]),(0,i.Wm)(cn,{recipes:this.recipes,personalPage:!0,offset:this.offset,limit:this.limit,onRecipeChosen:e.recipeChosen,onRemoveRecipe:e.removeRecipe,onAddCalendar:e.addCalendar},null,8,["recipes","offset","limit","onRecipeChosen","onRemoveRecipe","onAddCalendar"])])]))}});const kn=bn;var Dn=kn;const Cn={class:"container"},In=(0,i.uE)('<h3 data-v-74c677a0>Sign in</h3><div class="input-field" data-v-74c677a0><label for="signup" data-v-74c677a0>Email/Usernme</label><input type="text" id="emailusername" required data-v-74c677a0></div><div class="input-field" data-v-74c677a0><label for="signup" data-v-74c677a0>Password</label><input type="password" id="passwd" required data-v-74c677a0></div><div data-v-74c677a0><button class="btn waves-effect waves-light" type="submit" data-v-74c677a0> Submit <i class="material-icons right" data-v-74c677a0>send</i></button></div>',4),Rn=[In];function Sn(e,t,s,n,a,o){return(0,i.wg)(),(0,i.iD)("div",Cn,[(0,i._)("form",{id:"signin",class:"input-field",onSubmit:t[0]||(t[0]=(0,F.iM)(((...e)=>o.signin&&o.signin(...e)),["prevent"]))},Rn,32)])}P().AutoInit();var qn={methods:{signin:async function(){try{const e={};document.querySelectorAll("#signin input").forEach((t=>{e[t.id]=t.value}));const t=await ns.signin(e),s=t.token,i=t.user;this.$store.dispatch("login",{token:s,user:i}),this.$router.push("/"),P().toast({html:`Welcome ${i.username} !`,classes:"rounded"})}catch(e){P().toast({html:e.response.data.msg,classes:"rounded"})}}},computed:{login:(e,t)=>{(void 0).$store.dispatch("login",{token:e,user:t})}}};const An=(0,p.Z)(qn,[["render",Sn],["__scopeId","data-v-74c677a0"]]);var Wn=An;const Un=e=>((0,i.dD)("data-v-f9b38c7e"),e=e(),(0,i.Cn)(),e),xn={class:"container"},$n={key:0},zn=Un((()=>(0,i._)("label",null,[(0,i._)("input",{type:"checkbox",id:"isAdmin"}),(0,i._)("span",null,"Admin")],-1))),En=[zn],jn=(0,i.uE)('<div class="input-field" data-v-f9b38c7e><label for="signup" data-v-f9b38c7e>Email</label><input type="text" id="email" required data-v-f9b38c7e></div><div class="input-field" data-v-f9b38c7e><label for="signup" data-v-f9b38c7e>Username</label><input type="text" id="username" required data-v-f9b38c7e></div><div class="input-field" data-v-f9b38c7e><label for="signup" data-v-f9b38c7e>Password</label><input type="password" id="passwd" required data-v-f9b38c7e></div><div class="input-field" data-v-f9b38c7e><label for="signup" data-v-f9b38c7e>Repeat password</label><input type="password" id="passwd_repeat" required data-v-f9b38c7e></div><div class="input-field" data-v-f9b38c7e><button class="btn waves-effect waves-light" type="submit" data-v-f9b38c7e> Submit <i class="material-icons right" data-v-f9b38c7e>send</i></button></div>',5);function On(e,t,s,n,a,o){return(0,i.wg)(),(0,i.iD)("div",xn,[(0,i._)("form",{id:"signup",onSubmit:t[0]||(t[0]=(0,F.iM)(((...e)=>o.signup&&o.signup(...e)),["prevent"]))},[(0,i._)("h3",null,(0,Q.zw)(this.$store.getters.getUser.admin?"Create user":"Sign up"),1),a.getters.getUser.admin?((0,i.wg)(),(0,i.iD)("div",$n,En)):(0,i.kq)("",!0),jn],32)])}P().AutoInit();var Ln={data(){return{getters:this.$store.getters}},methods:{signup:async function(){try{const e={};document.querySelectorAll("#signup input").forEach((t=>{"checkbox"==t.type?e[t.id]=t.checked:e[t.id]=t.value}));const t=await ns.signup(e);P().toast({html:t.msg,classes:"rounded"}),this.$router.push("/signin")}catch(e){console.log(e),P().toast({html:e.response.data.msg,classes:"rounded"})}}}};const Pn=(0,p.Z)(Ln,[["render",On],["__scopeId","data-v-f9b38c7e"]]);var Tn=Pn,Mn=s(65),Yn=s(2415);const Bn=()=>({token:"",user:{}});var Nn=new Mn.ZP.Store({strict:!1,plugins:[(0,Yn.Z)()],state:Bn(),getters:{isLoggedIn:e=>e.token.length>0,getToken:e=>e.token,getUser:e=>e.user},mutations:{SET_TOKEN:(e,t)=>{e.token=t},SET_USER:(e,t)=>{e.user=t},RESET:e=>{Object.assign(e,Bn())}},actions:{login:({commit:e},{token:t,user:s})=>{e("SET_TOKEN",t),e("SET_USER",s),o().defaults.headers.common.Authorization=`Bearer ${t}`},logout:({commit:e})=>{e("RESET",""),o().defaults.headers.common.Authorization="Bearer "}}});console.log("/"),o().defaults.headers.common.Authorization=`Bearer ${Nn.state.token}`;const Vn=[{path:"/",component:vn},{path:"/signin",component:Wn},{path:"/signup",component:Tn},{path:"/account",component:Dn},{path:"/calendar",component:ei},{path:"/editinfo",component:rs},{path:"/createuser",component:Tn},{path:"/createrecipe",component:mt},{path:"/recipe/:uuid",component:Ht}],Hn=(0,J.p7)({history:(0,J.r5)(),routes:Vn});(0,F.ri)(Z).use(Hn).use(Nn).mount("#app")},8422:function(e,t,s){e.exports=s.p+"img/food.5fa57bd6.png"}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,i,n,a){if(!i){var o=1/0;for(d=0;d<e.length;d++){i=e[d][0],n=e[d][1],a=e[d][2];for(var r=!0,l=0;l<i.length;l++)(!1&a||o>=a)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(r=!1,a<o&&(o=a));if(r){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[i,n,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,a,o=i[0],r=i[1],l=i[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(l)var d=l(s)}for(t&&t(i);c<o.length;c++)a=o[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},i=self["webpackChunkapp"]=self["webpackChunkapp"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(785)}));i=s.O(i)})();
//# sourceMappingURL=app.e544b17c.js.map
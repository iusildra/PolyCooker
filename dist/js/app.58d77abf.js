(function(){"use strict";var e={4181:function(e,t,s){var i=s(3396),a=JSON.parse('{"W":{"C0":"http://localhost:3080/api/seasons/","V5":"http://localhost:3080/api/types/","Tc":"http://localhost:3080/api/diets/","Dl":"http://localhost:3080/api/units/","Wo":"http://localhost:3080/api/users/id/","F_":"http://localhost:3080/api/recipes/","vB":"http://localhost:3080/api/recipes/id/","AQ":"http://localhost:3080/api/recipes/ingredients/","MP":"http://localhost:3080/api/ingredients/","zo":"http://localhost:3080/api/ingredients/name/","xJ":"http://localhost:3080/api/signin/","IU":"http://localhost:3080/api/signup/"}}'),n=s(5797),o=s.n(n),r=s(6265),l=s.n(r);const d={class:"page-footer"},c=(0,i.uE)('<div class="container" data-v-7003c254><div class="row" data-v-7003c254><div class="col l6 s12" data-v-7003c254><h5 class="white-text" data-v-7003c254>About PolyCooker</h5><p class="grey-text text-lighten-4" data-v-7003c254> I&#39;ve made this cooking site during a 2 weeks web project at Polytech Montpellier using Vue.js, Node.js and Express.js. You can create recipes and add them to a calendar in order to plan your shopping. </p></div><div class="col l4 offset-l2 s12" data-v-7003c254><h5 class="white-text" data-v-7003c254>Links</h5><ul data-v-7003c254><li data-v-7003c254><a class="grey-text text-lighten-3" href="https://github.com/iusildra" target="_blank" data-v-7003c254>My Github</a></li><li data-v-7003c254><a class="grey-text text-lighten-3" href="https://www.linkedin.com/in/lucas-nouguier-833725196/" target="_blank" data-v-7003c254>Mon Linkedin (Français)</a></li><li data-v-7003c254><a class="grey-text text-lighten-3" href="https://www.linkedin.com/in/lucas-nouguier-833725196/?locale=en_US" target="_blank" data-v-7003c254>My Linkedin (English)</a></li></ul></div></div></div><div class="footer-copyright" data-v-7003c254><div class="container" data-v-7003c254> © Way too perfectible to claim copyrights :) © </div></div>',2),u=[c];function p(e,t){return(0,i.wg)(),(0,i.iD)("footer",d,u)}var h=s(89);const g={},m=(0,h.Z)(g,[["render",p],["__scopeId","data-v-7003c254"]]);var f=m;const v=e=>((0,i.dD)("data-v-e85e1b5c"),e=e(),(0,i.Cn)(),e),_={class:"navbar-fixed"},w={class:"nav-wrapper"},y=(0,i.Uk)("Polycooker"),b=v((()=>(0,i._)("ul",{class:"right"},[(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-trigger",href:"#!","data-target":"dropdown1"},[(0,i.Uk)("Account"),(0,i._)("i",{class:"material-icons right"},"arrow_drop_down")])])],-1))),k={id:"dropdown1",class:"dropdown-content"},D=(0,i.Uk)("My account"),I=(0,i.Uk)("Calendar"),C={key:0,class:"divider"},S={key:1},R=(0,i.Uk)("Sign in"),q={key:2},A=(0,i.Uk)("Sign up"),W={key:3},U=(0,i.Uk)("Create user"),x={key:4},$=(0,i.Uk)("Edit my info"),z={key:5,class:"divider"},E={key:6},j=(0,i.Uk)("Deconnexion"),L={key:7},O=(0,i.Uk)("Delete account");function P(e,t,s,a,n,o){const r=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("header",null,[(0,i._)("div",_,[(0,i._)("nav",null,[(0,i._)("div",w,[(0,i.Wm)(r,{to:"/",class:"left brand-logo"},{default:(0,i.w5)((()=>[y])),_:1}),b])]),(0,i._)("ul",k,[(0,i._)("li",null,[(0,i.Wm)(r,{to:"/account"},{default:(0,i.w5)((()=>[D])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(r,{to:"/calendar"},{default:(0,i.w5)((()=>[I])),_:1})]),!n.getters.isLoggedIn||n.getters.getUser.admin?((0,i.wg)(),(0,i.iD)("li",C)):(0,i.kq)("",!0),n.getters.isLoggedIn?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("li",S,[(0,i.Wm)(r,{to:"/signin"},{default:(0,i.w5)((()=>[R])),_:1})])),n.getters.isLoggedIn?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("li",q,[(0,i.Wm)(r,{to:"/signup"},{default:(0,i.w5)((()=>[A])),_:1})])),n.getters.isLoggedIn&&n.getters.getUser.admin?((0,i.wg)(),(0,i.iD)("li",W,[(0,i.Wm)(r,{to:"/createuser"},{default:(0,i.w5)((()=>[U])),_:1})])):(0,i.kq)("",!0),n.getters.isLoggedIn?((0,i.wg)(),(0,i.iD)("li",x,[(0,i.Wm)(r,{to:"/editinfo"},{default:(0,i.w5)((()=>[$])),_:1})])):(0,i.kq)("",!0),n.getters.isLoggedIn?((0,i.wg)(),(0,i.iD)("li",z)):(0,i.kq)("",!0),n.getters.isLoggedIn?((0,i.wg)(),(0,i.iD)("li",E,[(0,i.Wm)(r,{to:"/",onClick:o.logout},{default:(0,i.w5)((()=>[j])),_:1},8,["onClick"])])):(0,i.kq)("",!0),n.getters.isLoggedIn?((0,i.wg)(),(0,i.iD)("li",L,[(0,i.Wm)(r,{to:"/",class:"materialize-red-text",onClick:o.deleteAccount},{default:(0,i.w5)((()=>[O])),_:1},8,["onClick"])])):(0,i.kq)("",!0)])])])}var T={mounted(){o().AutoInit()},data(){return{getters:this.$store.getters}},methods:{signIn:()=>{let e={};document.querySelectorAll("#signup input").forEach((t=>{e[t.id]=t.value}));const t={body:JSON.stringify(e),headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST"};fetch(a.W.xJ,t).then((e=>e.json())).then((e=>o().toast({html:e.msg,classes:"rounded"})))},logout(){this.$store.dispatch("logout"),this.$router.push("/"),o().toast({html:"Goodbye !",classes:"rounded"})},deleteAccount:async function(){let e=prompt("Please enter your full username (case sensitive) to confirm your account deletion");if(e!=this.$store.getters.getUser.username)return;const t=this.$store.getters.getUser.user_id;try{const e=await l()["delete"](a.W.Wo+t);this.logout(),this.$emit("userDeleted",t),o().toast({html:e.data.msg,classes:"rounded"})}catch(s){o().toast({html:s.response.data.msg,classes:"rounded"})}}}};const M=(0,h.Z)(T,[["render",P],["__scopeId","data-v-e85e1b5c"]]);var B=M;const Y={id:"addRecipe"},N=(0,i._)("i",{class:"material-icons"},"add",-1),V={data(){return{recipes:[],calendarRecipes:[],chosenRecipe:"",getters:this.$store.getters}},methods:{searchRecipes:function(e,t,s=0,i=25){l().get(a.W.F_,{params:{search:e,id:t,limit:i,offset:s},headers:{"Content-Type":"application/json"}}).then((e=>this.recipes=e.data)).catch((()=>o().toast({html:"Failed to fetch recipes",classes:"rounded"})))},updateList:function(e){this.recipes=this.recipes.filter((t=>t.recipe_author!=e))},recipeChosen:function(e){this.chosenRecipe=e},removeRecipe:function(e){this.recipes.splice(this.recipes.indexOf(e),1)},addCalendar:function(e,t){this.calendarRecipes.push({id:e,name:t})}}};var H=Object.assign(V,{setup(e){return(e,t)=>{const s=(0,i.up)("router-view"),a=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(B,{onUserDeleted:e.updateList},null,8,["onUserDeleted"]),(0,i.Wm)(s,{recipes:e.recipes,recipe_id:e.chosenRecipe,calendarRecipes:e.calendarRecipes,onSearchRecipes:e.searchRecipes,onRecipeChosen:e.recipeChosen,onRemoveRecipe:e.removeRecipe,onAddCalendar:e.addCalendar},null,8,["recipes","recipe_id","calendarRecipes","onSearchRecipes","onRecipeChosen","onRemoveRecipe","onAddCalendar"]),(0,i.Wm)(f),(0,i._)("div",Y,[e.getters.isLoggedIn?((0,i.wg)(),(0,i.j4)(a,{key:0,to:"/createrecipe",class:"btn-floating btn-large waves-effect waves-light modal-trigger red",href:"#createRecipe"},{default:(0,i.w5)((()=>[N])),_:1})):(0,i.kq)("",!0)])],64)}}});const K=H;var Z=K,F=s(9242),J=s(678),Q=s(7139);const G=e=>((0,i.dD)("data-v-fa9a66be"),e=e(),(0,i.Cn)(),e),X={class:"container"},ee={class:"row"},te={key:0,class:"row image-preview",id:"image-preview"},se=["src"],ie={class:"input-field center"},ae=G((()=>(0,i._)("h3",null,"Add a new recipe",-1))),ne=G((()=>(0,i._)("div",{class:"center"},null,-1))),oe={class:"row"},re={class:"col s12 m4"},le=G((()=>(0,i._)("label",{for:"recipe_name"},"Recipe name",-1))),de={class:"col s12 m4"},ce=G((()=>(0,i._)("label",{for:"nbPersons"},"Number of persons",-1))),ue={class:"col s12 m4"},pe=G((()=>(0,i._)("label",{for:"duration"},"Duration (min)",-1))),he=G((()=>(0,i._)("div",{class:"divider"},null,-1))),ge={class:"row"},me={class:"input-field col s12 m4"},fe=G((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),ve=["value"],_e=G((()=>(0,i._)("label",{for:"season_select"},"Season",-1))),we={class:"input-field col s12 m4"},ye=G((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),be=["value"],ke=G((()=>(0,i._)("label",{for:"type_select"},"Type",-1))),De={class:"input-field col s12 m4"},Ie=G((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),Ce=["value"],Se=G((()=>(0,i._)("label",{for:"diet_select"},"Diet",-1))),Re=G((()=>(0,i._)("div",{class:"divider"},null,-1))),qe=G((()=>(0,i._)("h5",null,"Ingredients",-1))),Ae={id:"ingredients",class:"row"},We={class:"col s6"},Ue={class:"col s2"},xe=["onClick"],$e=G((()=>(0,i._)("i",{class:"material-icons"},"delete",-1))),ze=[$e],Ee={id:"addIngredient",class:"row input-field z-depth-1"},je={class:"col s12 m6 l4"},Le=G((()=>(0,i._)("label",{for:"ingr_name"},"Name",-1))),Oe=G((()=>(0,i._)("div",{class:"col s12 m3 l4"},[(0,i._)("label",{for:"ingr_quantity"},"Quantity"),(0,i._)("input",{type:"number",id:"ingr_quantity"})],-1))),Pe={class:"col s12 m3 l4"},Te=G((()=>(0,i._)("label",{for:"ingr_unit"},"Unit",-1))),Me={id:"ingr_unit"},Be=G((()=>(0,i._)("option",{value:"",selected:"",disabled:""},"Unit",-1))),Ye=["value"],Ne={class:"col s12",id:"ingr_actions"},Ve=G((()=>(0,i._)("div",{class:"col s8"},[(0,i._)("button",{type:"button","data-target":"modal_addIngr",class:"btn waves-effect waves-light materialize-red lighten-2 modal-trigger"}," Missing ingredient ? ")],-1))),He={class:"col s4"},Ke=G((()=>(0,i._)("i",{class:"material-icons"},"add",-1))),Ze=[Ke],Fe={id:"modal_addIngr",class:"modal"},Je={class:"modal-content"},Qe=G((()=>(0,i._)("h4",null,"New ingredient",-1))),Ge=G((()=>(0,i._)("div",{class:"input-field"},[(0,i._)("input",{type:"text",id:"ingredient_name",autocomplete:"off"}),(0,i._)("label",{for:"ingredient_name"},"Name")],-1))),Xe={class:"row"},et={class:"input-field col s6"},tt={id:"ingredient_season"},st=G((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),it=["value"],at=G((()=>(0,i._)("div",{class:"input-field col s6"},[(0,i._)("label",null,[(0,i._)("input",{type:"checkbox",id:"is_allergen"}),(0,i._)("span",null,"Allergen ?")])],-1))),nt={class:"modal-footer"},ot=G((()=>(0,i._)("div",{class:"divider"},null,-1))),rt=G((()=>(0,i._)("div",{class:"input-field col s12 m10"},[(0,i._)("h5",null,"Steps (separate with double LF)"),(0,i._)("textarea",{id:"recipe_steps"})],-1))),lt=G((()=>(0,i._)("div",{class:"divider"},null,-1))),dt={class:"row"},ct={class:"input-field col s6"},ut=G((()=>(0,i._)("h6",null,"Difficulty",-1))),pt={name:"value"},ht={class:"input-field col s6"},gt=G((()=>(0,i._)("h6",null,"Cost",-1))),mt={name:"value"},ft=G((()=>(0,i._)("div",{class:"submit"},[(0,i._)("button",{class:"btn waves-effect waves-light",type:"submit"},[(0,i.Uk)(" Submit "),(0,i._)("i",{class:"material-icons right"},"send")])],-1)));function vt(e,t,s,a,n,o){return(0,i.wg)(),(0,i.iD)("div",X,[(0,i._)("form",{id:"createRecipe",onSubmit:t[13]||(t[13]=(0,F.iM)(((...e)=>o.onSubmit&&o.onSubmit(...e)),["prevent"])),enctype:"multipart/form-data"},[(0,i._)("div",ee,[n.image_data.length>0?((0,i.wg)(),(0,i.iD)("div",te,[(0,i._)("img",{class:"preview",src:n.image_data,alt:"New recipe's image",height:"150"},null,8,se)])):(0,i.kq)("",!0),(0,i._)("div",ie,[(0,i._)("input",{type:"file",id:"recipe_img",accept:"image/png, image/jpeg, image/jpg",onChange:t[0]||(t[0]=(...e)=>o.previewImage&&o.previewImage(...e))},null,32),n.image_data.length>0?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",onClick:t[1]||(t[1]=e=>n.image_data="")},"Delete")):(0,i.kq)("",!0)])]),ae,ne,(0,i._)("div",oe,[(0,i._)("div",re,[le,(0,i.wy)((0,i._)("input",{type:"text",id:"recipe_name","onUpdate:modelValue":t[2]||(t[2]=e=>n.name=e),required:"",autocomplete:"off"},null,512),[[F.nr,n.name]])]),(0,i._)("div",de,[ce,(0,i.wy)((0,i._)("input",{type:"number",id:"nbPersons","onUpdate:modelValue":t[3]||(t[3]=e=>n.nbPersons=e),min:"0",required:""},null,512),[[F.nr,n.nbPersons]])]),(0,i._)("div",ue,[pe,(0,i.wy)((0,i._)("input",{type:"number",id:"duration","onUpdate:modelValue":t[4]||(t[4]=e=>n.duration=e),min:"0",required:""},null,512),[[F.nr,n.duration]])])]),he,(0,i._)("div",ge,[(0,i._)("div",me,[(0,i.wy)((0,i._)("select",{id:"season_select","onUpdate:modelValue":t[5]||(t[5]=e=>n.season=e)},[fe,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.seasons,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e["season_name"],key:e["season_name"]},(0,Q.zw)(e["season_name"]),9,ve)))),128))],512),[[F.bM,n.season]]),_e]),(0,i._)("div",we,[(0,i.wy)((0,i._)("select",{id:"type_select","onUpdate:modelValue":t[6]||(t[6]=e=>n.type=e)},[ye,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.types,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e["type_name"],key:e["type_name"]},(0,Q.zw)(e["type_name"]),9,be)))),128))],512),[[F.bM,n.type]]),ke]),(0,i._)("div",De,[(0,i.wy)((0,i._)("select",{id:"diet_select","onUpdate:modelValue":t[7]||(t[7]=e=>n.diet=e)},[Ie,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.diets,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e["diet_name"],key:e["diet_name"]},(0,Q.zw)(e["diet_name"]),9,Ce)))),128))],512),[[F.bM,n.diet]]),Se])]),Re,qe,(0,i._)("div",Ae,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.ingredients,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"ingredient col s12 m6 l5 xl3 z-depth-1 valign-wrapper",key:t},[(0,i._)("div",We,(0,Q.zw)(e.name+" : "+e.quantity+e.unit),1),(0,i._)("div",Ue,[(0,i._)("button",{type:"button",id:"addIngredient",class:"btn-small red",onClick:t=>o.deleteIngredient(e)},ze,8,xe)])])))),128))]),(0,i._)("div",Ee,[(0,i._)("div",je,[Le,(0,i._)("input",{type:"text",id:"ingr_name",class:"autocomplete",autocomplete:"off",onInput:t[8]||(t[8]=e=>o.getAutoComplete())},null,32)]),Oe,(0,i._)("div",Pe,[Te,(0,i._)("select",Me,[Be,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.units,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{key:t,value:e.unit_name},(0,Q.zw)(e.unit_name),9,Ye)))),128))])]),(0,i._)("div",Ne,[Ve,(0,i._)("div",He,[(0,i._)("button",{type:"button",class:"btn waves-effect waves-light blue",onClick:t[9]||(t[9]=(...e)=>o.addIngredient&&o.addIngredient(...e))},Ze)])])]),(0,i._)("div",Fe,[(0,i._)("div",Je,[Qe,Ge,(0,i._)("div",Xe,[(0,i._)("div",et,[(0,i._)("select",tt,[st,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.seasons,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e.season_name,key:e.season_name},(0,Q.zw)(e.season_name),9,it)))),128))])]),at])]),(0,i._)("div",nt,[(0,i._)("button",{type:"button",class:"modal-close waves-effect waves-green btn-flat",onClick:t[10]||(t[10]=(...e)=>o.newIngredient&&o.newIngredient(...e))}," Validate ")])]),ot,rt,lt,(0,i._)("div",dt,[(0,i._)("div",ct,[ut,(0,i.wy)((0,i._)("input",{type:"range",id:"difficulty",min:"0",max:"5",step:"0.5","onUpdate:modelValue":t[11]||(t[11]=e=>n.difficulty=e)},null,512),[[F.nr,n.difficulty]]),(0,i._)("p",pt,(0,Q.zw)(n.difficulty)+" / 5",1)]),(0,i._)("div",ht,[gt,(0,i.wy)((0,i._)("input",{type:"range",id:"cost",min:"0",max:"5",step:"0.5","onUpdate:modelValue":t[12]||(t[12]=e=>n.cost=e)},null,512),[[F.nr,n.cost]]),(0,i._)("p",mt,(0,Q.zw)(n.cost)+" / 5",1)])]),ft],32)])}var _t={created(){this.fetchOptions((()=>{o().AutoInit(),o().Autocomplete.init(document.querySelectorAll("#ingr_name"),{data:{},limit:1/0,minLength:1})}))},data(){return{seasons:[],types:[],diets:[],units:[],name:"",nbPersons:0,duration:0,season:"",type:"",diet:"",ingredients:[],difficulty:0,cost:0,count:0,image_data:""}},methods:{async fetchOptions(e){await fetch(a.W.C0).then((e=>e.json())).then((e=>this.seasons=e)),await fetch(a.W.V5).then((e=>e.json())).then((e=>this.types=e)),await fetch(a.W.Tc).then((e=>e.json())).then((e=>this.diets=e)),await fetch(a.W.Dl).then((e=>e.json())).then((e=>this.units=e)),e()},previewImage(){var e=document.getElementById("recipe_img");if(e.files&&e.files[0]){console.log(e.files);var t=new FileReader;t.onload=e=>{this.image_data=e.target.result},t.readAsDataURL(e.files[0])}},onSubmit(){if(0==this.ingredients.length)return void o().toast({html:"You must give at least one ingredient !",classes:"rounded"});if(0==document.getElementById("recipe_steps").value.length)return void o().toast({html:"You must give at least one step !",classes:"rounded"});const e={author:this.$store.getters.getUser.user_id,name:this.name,for:this.nbPersons,duration:this.duration,season:this.season,type:this.type,diet:this.diet,ingredients:this.ingredients,steps:document.getElementById("recipe_steps").value,difficulty:this.difficulty,cost:this.cost,img:document.getElementById("recipe_img").files};l().post(a.W.F_,e).then((e=>o().toast({html:e.data.msg,classes:"rounded"}))).catch((e=>{o().toast({html:e.response.data.msg,classes:"rounded"})}))},getAutoComplete(){let e=document.getElementById("ingr_name");const t=e.value;t.length>=3&&fetch(a.W.zo+t).then((e=>e.json())).then((t=>{let s=t.map((e=>`"${e["ingredient_name"]}":""`)).join();s="{"+s+"}";let i=o().Autocomplete.getInstance(e);i.updateData(JSON.parse(s))}))},addIngredient(){const e=document.getElementById("ingr_name").value,t=document.getElementById("ingr_quantity").value,s=document.getElementById("ingr_unit").value;0==e.length||0==t||0==s.length?o().toast({html:"Please provide correct inputs !",classes:"rounded"}):this.ingredients.push({name:e,quantity:t,unit:s})},deleteIngredient(e){this.ingredients.splice(this.ingredients.indexOf(e),1)},async newIngredient(){const e=document.getElementById("ingredient_season").value,t={ingredient_name:document.getElementById("ingredient_name").value,ingredient_season:e.length>0?e:null,is_allergen:document.getElementById("is_allergen").checked};try{const e=await l().post(a.W.MP,t);o().toast({html:e.data.msg,classes:"rounded"}),document.getElementById("ingr_name").value=t.ingredient_name}catch(s){o().toast({html:"Creation failed. Maybe the ingredient already exists ?",classes:"rounded"})}}}};const wt=(0,h.Z)(_t,[["render",vt],["__scopeId","data-v-fa9a66be"]]);var yt=wt;const bt=e=>((0,i.dD)("data-v-06b2cbf8"),e=e(),(0,i.Cn)(),e),kt={class:"col s12 m3 xl2"},Dt=bt((()=>(0,i._)("h5",null,"Ingredients",-1))),It={class:"card"};var Ct={props:{ingredients:{type:Array,required:!0}},setup(e){return(t,s)=>((0,i.wg)(),(0,i.iD)("div",kt,[Dt,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.ingredients,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"s4 m6 l12",key:e.ingredient_id},[(0,i._)("div",It,[(0,i._)("span",null,[(0,i._)("strong",null,(0,Q.zw)(e.quantity)+(0,Q.zw)(e.unit_name+" "),1)]),(0,i._)("span",null,(0,Q.zw)(e.ingredient_name),1)])])))),128))]))}};const St=(0,h.Z)(Ct,[["__scopeId","data-v-06b2cbf8"]]);var Rt=St;const qt={class:"col s12 m9 xl10"},At=(0,i._)("div",{class:"divider"},null,-1);var Wt={props:{steps:{type:Array,required:!0}},setup(e){return(t,s)=>((0,i.wg)(),(0,i.iD)("div",qt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.steps,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"step",key:t},[At,(0,i._)("h5",null,"Step n°"+(0,Q.zw)(t+1),1),(0,i.Uk)(" "+(0,Q.zw)(e),1)])))),128))]))}};const Ut=Wt;var xt=Ut,$t=s(8422);const zt={class:"container"},Et=["alt"],jt={class:"chip"},Lt={class:"flex"},Ot={class:"flex"},Pt={key:0},Tt={key:1},Mt={key:2},Bt={methods:{diplayDuration:e=>e>60?e/60+"h"+(e-e/60*60)+"m":e+"m"}};var Yt=Object.assign(Bt,{props:{info:{type:Object,required:!0}},setup(e){return(t,s)=>((0,i.wg)(),(0,i.iD)("div",zt,[(0,i._)("div",null,[(0,i._)("img",{src:$t,alt:e.info.name+"'s picture",height:"200"},null,8,Et)]),(0,i._)("div",jt,(0,Q.zw)(e.info.author),1),(0,i._)("h4",null,(0,Q.zw)(e.info.name+" ("+e.info.for+"p.)"),1),(0,i._)("div",Lt,[(0,i._)("span",null,"Duration: "+(0,Q.zw)(t.diplayDuration(e.info.duration)),1),(0,i._)("span",null,"Difficulty : "+(0,Q.zw)(e.info.difficulty)+" / 5",1),(0,i._)("span",null,"Cost: "+(0,Q.zw)(e.info.cost)+" / 5",1)]),(0,i._)("div",Ot,[null!=e.info.season?((0,i.wg)(),(0,i.iD)("span",Pt,(0,Q.zw)(e.info.season),1)):(0,i.kq)("",!0),null!=e.info.type?((0,i.wg)(),(0,i.iD)("span",Tt,(0,Q.zw)(e.info.type),1)):(0,i.kq)("",!0),null!=e.info.diet?((0,i.wg)(),(0,i.iD)("span",Mt,(0,Q.zw)(e.info.diet),1)):(0,i.kq)("",!0)])]))}});const Nt=(0,h.Z)(Yt,[["__scopeId","data-v-3cc80aaf"]]);var Vt=Nt;const Ht={class:"container"},Kt={class:"row"},Zt={class:"row"},Ft={created(){o().AutoInit(),0==this.recipe_id.length?this.fetchRecipe(this.$route.params["uuid"]):this.fetchRecipe(this.recipe_id),this.$watch((()=>this.$route.params),(e=>{this.fetchRecipe(e["uuid"])}))},data(){return{ingredients:[],info:{},steps:[]}},methods:{fetchRecipe(e){l().get(a.W.vB+e).then((e=>{const t=e.data;this.info={diet:t.diet_name,season:t.season_name,type:t.type_name,cost:t.recipe_cost,difficulty:t.recipe_difficulty,duration:t.recipe_duration,for:t.recipe_for,name:t.recipe_name,author:t.username},this.ingredients=t.ingredients,this.steps=t.recipe_steps.split("\n\n")}))}}};var Jt=Object.assign(Ft,{props:{recipe_id:{type:String,required:!1,default:""}},setup(e){return(e,t)=>((0,i.wg)(),(0,i.iD)("div",Ht,[(0,i._)("div",Kt,[(0,i.Wm)(Vt,{info:e.info},null,8,["info"])]),(0,i._)("div",Zt,[(0,i.Wm)(Rt,{class:"ingredients",ingredients:e.ingredients},null,8,["ingredients"]),(0,i.Wm)(xt,{steps:e.steps},null,8,["steps"])])]))}});const Qt=(0,h.Z)(Jt,[["__scopeId","data-v-340cfd28"]]);var Gt=Qt;const Xt=e=>((0,i.dD)("data-v-5d513f32"),e=e(),(0,i.Cn)(),e),es={class:"container"},ts=Xt((()=>(0,i._)("h3",null,"Edit infos",-1))),ss={class:"input-field"},is=["value"],as=Xt((()=>(0,i._)("label",{for:"signup"},"Email",-1))),ns={class:"input-field"},os=["value"],rs=Xt((()=>(0,i._)("label",{for:"signup"},"Username",-1))),ls=(0,i.uE)('<div class="input-field" data-v-5d513f32><label for="signup" data-v-5d513f32>New password</label><input type="password" id="passwd" data-v-5d513f32></div><div class="input-field" data-v-5d513f32><label for="signup" data-v-5d513f32>Confirm password</label><input type="password" id="passwd_repeat" data-v-5d513f32></div><div class="input-field" data-v-5d513f32><button class="btn waves-effect waves-light" type="submit" data-v-5d513f32> Submit <i class="material-icons right" data-v-5d513f32>send</i></button></div>',3);function ds(e,t,s,a,n,o){return(0,i.wg)(),(0,i.iD)("div",es,[(0,i._)("form",{id:"signup",onSubmit:t[0]||(t[0]=(0,F.iM)(((...e)=>o.updateData&&o.updateData(...e)),["prevent"]))},[ts,(0,i._)("div",ss,[(0,i._)("input",{type:"text",id:"email",value:n.getters.getUser.email,required:""},null,8,is),as]),(0,i._)("div",ns,[(0,i._)("input",{type:"text",id:"username",value:n.getters.getUser.username,required:""},null,8,os),rs]),ls],32)])}var cs={async signin(e){return l().post(a.W.xJ,e).then((e=>e.data))},async signup(e){return l().post(a.W.IU,e).then((e=>e.data))},async updateData(e){return l().put(a.W.Wo+e["id"],e).then((e=>e.data))}},us=s(8958),ps=s.n(us);o().AutoInit();var hs={data(){return{getters:this.$store.getters}},methods:{updateData:async function(){try{const e={};if(document.querySelectorAll("#signup input").forEach((t=>{e[t.id]=t.value})),e["id"]=this.$store.getters.getUser.user_id,e["passwd"]!=e["passwd_repeat"])return void o().toast({html:"Both passwords must match !",classes:"rounded"});e["passwd"]=ps().hashSync(e["passwd"],10);const t=await cs.updateData(e);o().toast({html:t.msg,classes:"rounded"})}catch(e){o().toast({html:e.response.data.msg,classes:"rounded"})}}}};const gs=(0,h.Z)(hs,[["render",ds],["__scopeId","data-v-5d513f32"]]);var ms=gs,fs=s(4870),vs=s(2269),_s=s.n(vs);const ws=e=>((0,i.dD)("data-v-487a4e9a"),e=e(),(0,i.Cn)(),e),ys=ws((()=>(0,i._)("div",{class:"divider"},null,-1))),bs={class:"row weekNb"},ks={class:"row col week"},Ds=ws((()=>(0,i._)("h6",null,"Noon",-1))),Is={class:"row meal valign-wrapper"},Cs=ws((()=>(0,i._)("span",{class:"id",hidden:""},null,-1))),Ss=ws((()=>(0,i._)("span",{class:"name"},null,-1))),Rs=[Cs,Ss],qs=ws((()=>(0,i._)("div",{class:"input-field col s12 m6"},[(0,i._)("label",{for:".nb_persons"},"For how many ?"),(0,i._)("input",{type:"number",class:"nb_persons",min:"0"})],-1))),As=ws((()=>(0,i._)("h6",null,"Evening",-1))),Ws={class:"row meal valign-wrapper"},Us=ws((()=>(0,i._)("span",{class:"id",hidden:""},null,-1))),xs=ws((()=>(0,i._)("span",{class:"name"},null,-1))),$s=[Us,xs],zs=ws((()=>(0,i._)("div",{class:"input-field col s12 m6"},[(0,i._)("label",{for:".nb_persons"},"For how many ?"),(0,i._)("input",{type:"number",class:"nb_persons",min:"0"})],-1))),Es={data(){return{days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]}},methods:{onDrop(e){const t=e.dataTransfer.getData("itemID"),s=e.dataTransfer.getData("itemName");"DIV"==e.target.tagName?(e.target.querySelector(".id").innerText=t,e.target.querySelector(".name").innerText=s):(e.target.innerText=s,e.target.parentNode.querySelector(".id").innerText=t)}},computed:{nbWeeks:function(){return parseInt(this.nbWeeks,10)}}};var js=Object.assign(Es,{props:{nbWeeks:{type:Number,required:!0}},setup(e){return(t,s)=>((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.nbWeeks,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e},[ys,(0,i._)("div",bs,[(0,i._)("h4",null,"Week n°"+(0,Q.zw)(e),1)]),(0,i._)("div",ks,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.days,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"meals col z-depth-1 s12 m6 xl4",key:e},[(0,i._)("h5",null,(0,Q.zw)(e),1),Ds,(0,i._)("div",Is,[(0,i._)("div",{class:"dropzone valign-wrapper center col s12 m5",onDrop:s[0]||(s[0]=e=>t.onDrop(e)),onDragover:s[1]||(s[1]=(0,F.iM)((()=>{}),["prevent"])),onDragenter:s[2]||(s[2]=(0,F.iM)((()=>{}),["prevent"]))},Rs,32),qs]),As,(0,i._)("div",Ws,[(0,i._)("div",{class:"dropzone col s12 m5",onDrop:s[3]||(s[3]=e=>t.onDrop(e)),onDragover:s[4]||(s[4]=(0,F.iM)((()=>{}),["prevent"])),onDragenter:s[5]||(s[5]=(0,F.iM)((()=>{}),["prevent"]))},$s,32),zs])])))),128))])])))),128))}});const Ls=(0,h.Z)(js,[["__scopeId","data-v-487a4e9a"]]);var Os=Ls;const Ps=e=>((0,i.dD)("data-v-ea326f96"),e=e(),(0,i.Cn)(),e),Ts={id:"calendar",class:"container"},Ms={class:"row input-field"},Bs=Ps((()=>(0,i._)("option",{value:"1"},"1",-1))),Ys=Ps((()=>(0,i._)("option",{value:"2"},"2",-1))),Ns=Ps((()=>(0,i._)("option",{value:"3"},"3",-1))),Vs=Ps((()=>(0,i._)("option",{value:"4"},"4",-1))),Hs=[Bs,Ys,Ns,Vs],Ks=Ps((()=>(0,i._)("label",{for:"nbWeek"},"Number of weeks",-1))),Zs={class:"col s12 m8"},Fs=Ps((()=>(0,i._)("div",{class:"col s12 m4"},null,-1))),Js={class:"row list"},Qs=["onDragstart"],Gs=Ps((()=>(0,i._)("i",{class:"close material-icons"},"close",-1))),Xs={class:"row"},ei={id:"modal1",class:"modal"},ti={ref:"printcontent",class:"modal-content"},si=Ps((()=>(0,i._)("h4",null,"Shopping list",-1))),ii=Ps((()=>(0,i._)("input",{type:"checkbox"},null,-1))),ai={class:"modal-footer"},ni=Ps((()=>(0,i._)("button",{class:"modal-close waves-effect waves-green btn-flat"}," Close ",-1))),oi={created(){this.$store.getters.isLoggedIn?(this.username=this.$store.getters.getUser.username,this.id=this.$store.getters.getUser.user_id):(this.$router.push("/signin"),o().toast({html:"You need to be logged in to access this page !",classes:"rounded"}))},mounted(){o().AutoInit()},data(){return{nbWeeks:1,shoppingList:{}}},methods:{startDrag(e,t){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("itemID",t.id),e.dataTransfer.setData("itemName",t.name)},printShoppingList(){this.shoppingList={};let e={};const t=document.querySelectorAll(".meal");t.forEach((t=>{const s=t.querySelector(".id").innerText,i=t.querySelector(".nb_persons").value;s.length>0&&(null!=e[s]?e[s]+=parseInt(i,10):e[s]=parseInt(i,10))})),l().get(a.W.AQ,{params:{meals:Object.keys(e)}}).then((t=>t.data.forEach((t=>{const s=t.the_ingredient,i=t.in_recipe;let a=t["Q per person"]*e[i],n=t.contained_unit;"d.s"==n&&(a*=10,n="cl"),"t.s"==n&&(a*=6,n="cl"),null==this.shoppingList[s]?this.shoppingList[s]={name:s,q:Math.round(parseInt(a)),unit:n}:this.shoppingList[s].q+=Math.round(a)})))).catch((e=>o().toast({html:e.response.data.msg})))},async print(){console.log("printing..");const e=this.$refs.printcontent,t={type:"dataURL"},s=await _s()(e,t),i=document.createElement("a");i.setAttribute("download","shoppingList.png"),i.setAttribute("href",s.toDataURL("image/png").replace("image/png","image/octet-stream")),i.click(),console.log("done")}}};var ri=Object.assign(oi,{props:{calendarRecipes:{type:Array,required:!1,default:()=>[]}},setup(e){return(t,s)=>((0,i.wg)(),(0,i.iD)("div",Ts,[(0,i._)("div",Ms,[(0,i.wy)((0,i._)("select",{name:"",id:"nbWeek","onUpdate:modelValue":s[0]||(s[0]=e=>(0,fs.dq)(nbWeeks)?nbWeeks.value=e:null)},Hs,512),[[F.bM,t.nbWeeks]]),Ks]),(0,i._)("div",Zs,[(0,i.Wm)(Os,{nbWeeks:parseInt(t.nbWeeks,10)},null,8,["nbWeeks"])]),Fs,(0,i._)("div",Js,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.calendarRecipes,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"chip",draggable:"true",onDragstart:s=>t.startDrag(s,{id:e.id,name:e.name}),key:e.id},[(0,i.Uk)((0,Q.zw)(e.name),1),Gs],40,Qs)))),128))]),(0,i._)("div",Xs,[(0,i._)("button",{"data-target":"modal1",type:"button",class:"btn-large modal-trigger",onClick:s[1]||(s[1]=e=>t.printShoppingList())}," Generate shopping list ")]),(0,i._)("div",ei,[(0,i._)("div",ti,[si,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(t.shoppingList).sort(),(e=>((0,i.wg)(),(0,i.iD)("p",{key:e},[(0,i._)("label",null,[ii,(0,i._)("span",null,(0,Q.zw)(t.shoppingList[e].name+" : "+t.shoppingList[e].q+t.shoppingList[e].unit),1)])])))),128))],512),(0,i._)("div",ai,[(0,i._)("button",{class:"btn-flat",onClick:s[2]||(s[2]=(...e)=>t.print&&t.print(...e))},"Print"),ni])])]))}});const li=(0,h.Z)(ri,[["__scopeId","data-v-ea326f96"]]);var di=li;const ci=e=>((0,i.dD)("data-v-62cc023c"),e=e(),(0,i.Cn)(),e),ui={class:"search col s12 m3 l3 xl2"},pi=ci((()=>(0,i._)("h5",null,"Search",-1))),hi={key:0,class:"input-field"},gi=ci((()=>(0,i._)("label",{for:"author_search",class:"caption"},"Author",-1))),mi={class:"input-field"},fi=ci((()=>(0,i._)("label",{for:"recipe_search"},"Recipe",-1))),vi={class:"input-field"},_i={id:"ingredient_chips",class:"chips"},wi=ci((()=>(0,i._)("label",{for:"ingredients_search"},"Ingredient",-1))),yi={class:"input-field"},bi=ci((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),ki=["value"],Di=ci((()=>(0,i._)("label",{for:"season_select"},"Season",-1))),Ii={class:"input-field"},Ci=ci((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),Si=["value"],Ri=ci((()=>(0,i._)("label",{for:"type_select"},"Type",-1))),qi={class:"input-field"},Ai=ci((()=>(0,i._)("option",{value:"",selected:""},"All",-1))),Wi=["value"],Ui=ci((()=>(0,i._)("label",{for:"diet_select"},"Diet",-1))),xi=ci((()=>(0,i._)("div",{class:"submit"},[(0,i._)("button",{class:"btn waves-effect waves-light",type:"submit"},[(0,i.Uk)(" Submit "),(0,i._)("i",{class:"material-icons right"},"send")])],-1))),$i={mounted(){this.fetchOptions((()=>{o().AutoInit()}))},data(){return{seasons:[],types:[],diets:[],authorSearch:"",recipeSearch:"",season:"",type:"",diet:""}},methods:{getAutoComplete(){let e=document.getElementById("ingredients_search");const t=e.value;t.length>=3&&fetch(a.W.zo+t).then((e=>e.json())).then((t=>{let s=t.map((e=>`"${e["ingredient_name"]}":""`)).join();s="{"+s+"}";let i=o().Autocomplete.getInstance(e);i.updateData(JSON.parse(s))}))},getIngredients(){let e=document.querySelectorAll(".chip"),t=[];return e.forEach((e=>{t.push(e.innerHTML.split("<")[0])})),t},onSubmit(){let e={},t=this.getIngredients();this.authorSearch.length>0&&(e["author"]=this.authorSearch),this.recipeSearch.length>0&&(e["recipe"]=this.recipeSearch),t.length>0&&(e["ingredients"]=t),this.season.length>0&&(e["seasonID"]=this.season),this.type.length>0&&(e["typeID"]=this.type),this.diet.length>0&&(e["dietID"]=this.diet),this.$emit("searchRecipes",e)},async fetchOptions(e){await fetch(a.W.C0).then((e=>e.json())).then((e=>this.seasons=e)),await fetch(a.W.V5).then((e=>e.json())).then((e=>this.types=e)),await fetch(a.W.Tc).then((e=>e.json())).then((e=>this.diets=e)),e()}}};var zi=Object.assign($i,{props:{personalPage:{type:Boolean,required:!0}},setup(e){return(t,s)=>((0,i.wg)(),(0,i.iD)("div",ui,[(0,i._)("form",{id:"searchRecipe",onSubmit:s[6]||(s[6]=(0,F.iM)(((...e)=>t.onSubmit&&t.onSubmit(...e)),["prevent"]))},[pi,e.personalPage?((0,i.wg)(),(0,i.iD)("div",hi,[(0,i.wy)((0,i._)("input",{type:"text",id:"author_search","onUpdate:modelValue":s[0]||(s[0]=e=>(0,fs.dq)(authorSearch)?authorSearch.value=e:null)},null,512),[[F.nr,t.authorSearch]]),gi])):(0,i.kq)("",!0),(0,i._)("div",mi,[(0,i.wy)((0,i._)("input",{type:"text",id:"recipe_search","onUpdate:modelValue":s[1]||(s[1]=e=>(0,fs.dq)(recipeSearch)?recipeSearch.value=e:null)},null,512),[[F.nr,t.recipeSearch]]),fi]),(0,i._)("div",vi,[(0,i._)("div",_i,[(0,i._)("input",{id:"ingredients_search",class:"autocomplete",placeholder:"Enter a tag",onInput:s[2]||(s[2]=(...e)=>t.getAutoComplete&&t.getAutoComplete(...e)),autocomplete:"off"},null,32)]),wi]),(0,i._)("div",yi,[(0,i.wy)((0,i._)("select",{id:"season_select","onUpdate:modelValue":s[3]||(s[3]=e=>(0,fs.dq)(season)?season.value=e:null)},[bi,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.seasons,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e["season_name"],key:e["season_name"]},(0,Q.zw)(e["season_name"]),9,ki)))),128))],512),[[F.bM,t.season]]),Di]),(0,i._)("div",Ii,[(0,i.wy)((0,i._)("select",{id:"type_select","onUpdate:modelValue":s[4]||(s[4]=e=>(0,fs.dq)(type)?type.value=e:null)},[Ci,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.types,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e["type_name"],key:e["type_name"]},(0,Q.zw)(e["type_name"]),9,Si)))),128))],512),[[F.bM,t.type]]),Ri]),(0,i._)("div",qi,[(0,i.wy)((0,i._)("select",{id:"diet_select","onUpdate:modelValue":s[5]||(s[5]=e=>(0,fs.dq)(diet)?diet.value=e:null)},[Ai,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.diets,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e["diet_name"],key:e["diet_name"]},(0,Q.zw)(e["diet_name"]),9,Wi)))),128))],512),[[F.bM,t.diet]]),Ui]),xi],32)]))}});const Ei=(0,h.Z)(zi,[["__scopeId","data-v-62cc023c"]]);var ji=Ei;const Li={class:"card hoverable"},Oi={class:"card-image"},Pi=["alt"],Ti={class:"card-content"},Mi={class:"card-title center"},Bi={class:"center"},Yi={class:"center"},Ni={class:"center"},Vi={class:"center"},Hi={class:"center"},Ki={class:"center"},Zi={key:0,class:"card-action"},Fi=["onClick"],Ji=["onClick"],Qi={data(){return{getters:this.$store.getters}},methods:{addCalendar(e,t){this.$emit("addCalendar",e,t),o().toast({html:"Recipe has been added to your calendar !",classes:"rounded"})},deleteRecipe(e){let t=prompt("Please enter the name of the recipe to confirm its deletion");t==e.recipe_name&&l()["delete"](a.W.vB+e.recipe_id).then((t=>{o().toast({html:t.data.msg,classes:"rounded"}),this.$emit("removeRecipe",e)})).catch((e=>{o().toast({html:e.response.data.msg,class:"rounded"}),403==e.response.status&&this.$router.push("/signin")}))}}};var Gi=Object.assign(Qi,{props:{recipes:{type:Array,required:!0},personalPage:{type:Boolean,required:!0}},setup(e){return(t,s)=>{const a=(0,i.up)("router-link");return(0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.recipes,(s=>((0,i.wg)(),(0,i.iD)("div",{class:"col s12 m6 l4 xl3",key:s["recipe_id"]},[(0,i._)("div",Li,[(0,i.Wm)(a,{to:"/recipe/"+s.recipe_id,target:"_blank"},{default:(0,i.w5)((()=>[(0,i._)("div",Oi,[(0,i._)("img",{src:$t,alt:s.name+"'s picture"},null,8,Pi)]),(0,i._)("div",Ti,[(0,i._)("span",Mi,(0,Q.zw)(s["recipe_name"]),1),(0,i._)("p",Bi,(0,Q.zw)(s["username"]),1),(0,i._)("p",Yi," Difficulty : "+(0,Q.zw)(s["recipe_difficulty"])+" / 5 ",1),(0,i._)("p",Ni," Cost : "+(0,Q.zw)(s["recipe_cost"])+" / 5 ",1),(0,i._)("p",Vi,"Season : "+(0,Q.zw)(s["season_name"]),1),(0,i._)("p",Hi,"Type : "+(0,Q.zw)(s["type_name"]),1),(0,i._)("p",Ki,"Diet : "+(0,Q.zw)(s["diet_name"]),1)])])),_:2},1032,["to"]),t.getters.isLoggedIn?((0,i.wg)(),(0,i.iD)("div",Zi,[e.personalPage?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"waves-effect waves-light btn red",onClick:e=>t.deleteRecipe(s)}," Remove ",8,Fi)):(0,i.kq)("",!0),(0,i._)("button",{type:"button",class:"waves-effect waves-light btn add",onClick:e=>t.addCalendar(s.recipe_id,s.recipe_name)}," Add ",8,Ji)])):(0,i.kq)("",!0)])])))),128)}}});const Xi=(0,h.Z)(Gi,[["__scopeId","data-v-7f7e3f7c"]]);var ea=Xi;const ta=e=>((0,i.dD)("data-v-414a37ed"),e=e(),(0,i.Cn)(),e),sa={class:"col s12 m9 l9 xl10",id:"recipe_list"},ia={class:"pagination"},aa={class:"waves-effect"},na=["href","disabled"],oa=ta((()=>(0,i._)("i",{class:"material-icons"},"west",-1))),ra=[oa],la={class:"waves-effect"},da=["href"],ca=ta((()=>(0,i._)("i",{class:"material-icons"},"east",-1))),ua=[ca],pa={methods:{recipeChosen(e){this.$emit("recipeChosen",e)},removeRecipe(e){this.$emit("removeRecipe",e)},addCalendar(e,t){this.$emit("addCalendar",e,t)}},computed:{path(){return this.$route.path},nextPage(){return this.offset+this.limit},previousPage(){const e=this.offset-this.limit;return e<0?0:e},firstPage(){return null==this.offset||0==this.offset}}};var ha=Object.assign(pa,{props:{recipes:{type:Array,required:!1,default:()=>[]},personalPage:{type:Boolean,required:!1,default:!1},offset:{type:Number,required:!0},limit:{type:Number,required:!0}},setup(e){return(t,s)=>((0,i.wg)(),(0,i.iD)("div",sa,[(0,i._)("ul",ia,[(0,i._)("li",aa,[(0,i._)("a",{href:"#"+t.path+"?offset="+t.previousPage+"&limit=25",disabled:t.firstPage},ra,8,na)]),(0,i._)("li",la,[(0,i._)("a",{href:"#"+t.path+"?offset="+t.nextPage+"&limit=25"},ua,8,da)])]),(0,i.Wm)(ea,{recipes:e.recipes,personalPage:e.personalPage,onRecipeChosen:t.recipeChosen,onRemoveRecipe:t.removeRecipe,onAddCalendar:t.addCalendar},null,8,["recipes","personalPage","onRecipeChosen","onRemoveRecipe","onAddCalendar"])]))}});const ga=(0,h.Z)(ha,[["__scopeId","data-v-414a37ed"]]);var ma=ga;const fa={class:"row"},va=0,_a=25,wa={mounted(){this.searchRecipes({}),this.$watch((()=>this.$route.query),(e=>{this.offset=e.offset?parseInt(e.offset,10):va,this.limit=e.limit?parseInt(e.limit,10):_a,this.$emit("searchRecipes",this.search,"",this.offset,this.limit)}))},data(){return{search:{},offset:va,limit:_a}},methods:{searchRecipes:function(e){this.search=e,this.$emit("searchRecipes",e,"",this.offset,this.limit)},recipeChosen(e){this.$emit("recipeChosen",e)},addCalendar(e,t){this.$emit("addCalendar",e,t)}}};var ya=Object.assign(wa,{props:{recipes:{type:Array,required:!0,default:()=>[]}},setup(e){return(t,s)=>((0,i.wg)(),(0,i.iD)("div",fa,[(0,i.Wm)((0,fs.SU)(ji),{onSearchRecipes:t.searchRecipes,personalPage:!0},null,8,["onSearchRecipes"]),(0,i.Wm)(ma,{offset:t.offset,limit:t.limit,recipes:e.recipes,onRecipeChosen:t.recipeChosen,onAddCalendar:t.addCalendar},null,8,["offset","limit","recipes","onRecipeChosen","onAddCalendar"])]))}});const ba=ya;var ka=ba;const Da={class:"row"},Ia=0,Ca=25;o().AutoInit();const Sa={created(){this.$store.getters.isLoggedIn?(this.username=this.$store.getters.getUser.username,this.id=this.$store.getters.getUser.user_id,this.searchRecipes({},this.id)):(this.$router.push("/signin"),o().toast({html:"You need to be logged in to access this page !",classes:"rounded"})),this.$watch((()=>this.$route.query),(e=>{this.offset=e.offset?parseInt(e.offset,10):Ia,this.limit=e.limit?parseInt(e.limit,10):Ca,this.$emit("searchRecipes",this.search,this.id,this.offset,this.limit)}))},data(){return{offset:Ia,limit:Ca,username:"",search:{},id:""}},methods:{searchRecipes:function(e){this.search=e,this.$emit("searchRecipes",this.search,this.id,this.offset,this.limit)},recipeChosen(e){this.$emit("recipeChosen",e)},removeRecipe(e){this.$emit("removeRecipe",e)},addCalendar(e,t){this.$emit("addCalendar",e,t)}}};var Ra=Object.assign(Sa,{props:{recipes:{type:Array,required:!0,default:()=>[]}},setup(e){return(t,s)=>((0,i.wg)(),(0,i.iD)("main",null,[(0,i._)("div",Da,[(0,i.Wm)(ji,{onSearchRecipes:t.searchRecipes,personalPage:!1},null,8,["onSearchRecipes"]),(0,i.Wm)(ma,{recipes:e.recipes,personalPage:!0,offset:t.offset,limit:t.limit,onRecipeChosen:t.recipeChosen,onRemoveRecipe:t.removeRecipe,onAddCalendar:t.addCalendar},null,8,["recipes","offset","limit","onRecipeChosen","onRemoveRecipe","onAddCalendar"])])]))}});const qa=Ra;var Aa=qa;const Wa={class:"container"},Ua=(0,i.uE)('<h3 data-v-efb159ec>Sign in</h3><div class="input-field" data-v-efb159ec><label for="signup" data-v-efb159ec>Email/Usernme</label><input type="text" id="emailusername" required data-v-efb159ec></div><div class="input-field" data-v-efb159ec><label for="signup" data-v-efb159ec>Password</label><input type="password" id="passwd" required data-v-efb159ec></div><div data-v-efb159ec><button class="btn waves-effect waves-light" type="submit" data-v-efb159ec> Submit <i class="material-icons right" data-v-efb159ec>send</i></button></div>',4),xa=[Ua];function $a(e,t,s,a,n,o){return(0,i.wg)(),(0,i.iD)("div",Wa,[(0,i._)("form",{id:"signin",class:"input-field",onSubmit:t[0]||(t[0]=(0,F.iM)(((...e)=>o.signin&&o.signin(...e)),["prevent"]))},xa,32)])}o().AutoInit();var za={created(){this.getters.isLoggedIn&&(this.$router.push("/account"),o().toast({html:"You are already logged in !",classes:"rounded"}))},data(){return{getters:this.$store.getters}},methods:{signin:async function(){try{const e={};document.querySelectorAll("#signin input").forEach((t=>{e[t.id]=t.value}));const t=await cs.signin(e),s=t.token,i=t.user;this.$store.dispatch("login",{token:s,user:i}),this.$router.push("/"),o().toast({html:`Welcome ${i.username} !`,classes:"rounded"})}catch(e){o().toast({html:e.response.data.msg,classes:"rounded"})}}},computed:{login:(e,t)=>{(void 0).$store.dispatch("login",{token:e,user:t})}}};const Ea=(0,h.Z)(za,[["render",$a],["__scopeId","data-v-efb159ec"]]);var ja=Ea;const La=e=>((0,i.dD)("data-v-1721ea9e"),e=e(),(0,i.Cn)(),e),Oa={class:"container"},Pa={key:0},Ta=La((()=>(0,i._)("label",null,[(0,i._)("input",{type:"checkbox",id:"isAdmin"}),(0,i._)("span",null,"Admin")],-1))),Ma=[Ta],Ba=(0,i.uE)('<div class="input-field" data-v-1721ea9e><label for="signup" data-v-1721ea9e>Email</label><input type="text" id="email" required data-v-1721ea9e></div><div class="input-field" data-v-1721ea9e><label for="signup" data-v-1721ea9e>Username</label><input type="text" id="username" required data-v-1721ea9e></div><div class="input-field" data-v-1721ea9e><label for="signup" data-v-1721ea9e>Password</label><input type="password" id="passwd" required data-v-1721ea9e></div><div class="input-field" data-v-1721ea9e><label for="signup" data-v-1721ea9e>Repeat password</label><input type="password" id="passwd_repeat" required data-v-1721ea9e></div><div class="input-field" data-v-1721ea9e><button class="btn waves-effect waves-light" type="submit" data-v-1721ea9e> Submit <i class="material-icons right" data-v-1721ea9e>send</i></button></div>',5);function Ya(e,t,s,a,n,o){return(0,i.wg)(),(0,i.iD)("div",Oa,[(0,i._)("form",{id:"signup",onSubmit:t[0]||(t[0]=(0,F.iM)(((...e)=>o.signup&&o.signup(...e)),["prevent"]))},[(0,i._)("h3",null,(0,Q.zw)(n.getters.getUser.admin?"Create user":"Sign up"),1),n.getters.getUser.admin?((0,i.wg)(),(0,i.iD)("div",Pa,Ma)):(0,i.kq)("",!0),Ba],32)])}o().AutoInit();var Na={mounted(){this.getters.isLoggedIn&&!this.getters.getUser.admin&&(this.$router.push("/account"),o().toast({html:"Your are already logged in !",classes:"rounded"}))},data(){return{getters:this.$store.getters}},methods:{signup:async function(){const e=/^\w+[\w-\\.]*@\w+((-\w+)|(\w*))\.[a-z]{2,3}$/,t=document.querySelector("#email").value;if("-1"!=e[Symbol.search](t))try{let e={};if(document.querySelectorAll("#signup input").forEach((t=>{"checkbox"==t.type?e[t.id]=t.checked:e[t.id]=t.value})),e["passwd"]!=e["passwd_repeat"])return void o().toast({html:"Both passwords must match !",classes:"rounded"});e["passwd"]=ps().hashSync(e["passwd"],10);const t=await cs.signup(e);o().toast({html:t.msg,classes:"rounded"}),this.$router.push("/signin")}catch(s){o().toast({html:s.response.data.msg,classes:"rounded"})}else o().toast({html:"Invalid email !",classes:"rounded"})}}};const Va=(0,h.Z)(Na,[["render",Ya],["__scopeId","data-v-1721ea9e"]]);var Ha=Va,Ka=s(65),Za=s(2415);const Fa=()=>({token:"",user:{}});var Ja=new Ka.ZP.Store({strict:!1,plugins:[(0,Za.Z)()],state:Fa(),getters:{isLoggedIn:e=>e.token.length>0,getToken:e=>e.token,getUser:e=>e.user},mutations:{SET_TOKEN:(e,t)=>{e.token=t},SET_USER:(e,t)=>{e.user=t},RESET:e=>{Object.assign(e,Fa())}},actions:{login:({commit:e},{token:t,user:s})=>{e("SET_TOKEN",t),e("SET_USER",s),l().defaults.headers.common.Authorization=`Bearer ${t}`},logout:({commit:e})=>{e("RESET",""),l().defaults.headers.common.Authorization="Bearer "}}});l().defaults.headers.common.Authorization=`Bearer ${Ja.state.token}`;const Qa=[{path:"/",component:ka},{path:"/signin",component:ja},{path:"/signup",component:Ha},{path:"/account",component:Aa},{path:"/calendar",component:di},{path:"/editinfo",component:ms},{path:"/createuser",component:Ha},{path:"/recipe/:uuid",component:Gt},{path:"/createrecipe",component:yt}],Ga=(0,J.p7)({history:(0,J.r5)(),routes:Qa});(0,F.ri)(Z).use(Ga).use(Ja).mount("#app")},8422:function(e,t,s){e.exports=s.p+"img/food.5fa57bd6.png"}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){var e=[];s.O=function(t,i,a,n){if(!i){var o=1/0;for(c=0;c<e.length;c++){i=e[c][0],a=e[c][1],n=e[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(r=!1,n<o&&(o=n));if(r){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[i,a,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,n,o=i[0],r=i[1],l=i[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var c=l(s)}for(t&&t(i);d<o.length;d++)n=o[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},i=self["webpackChunkapp"]=self["webpackChunkapp"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(4181)}));i=s.O(i)})();
//# sourceMappingURL=app.58d77abf.js.map